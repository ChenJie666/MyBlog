<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>遇到的问题 | Hexo</title><meta name="author" content="CJ"><meta name="copyright" content="CJ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="问题一： 现象：使用Java的lambda表达式写算子的实现类1234567891011121314151617181920public class WordCount &amp;#123;    public static void main(String[] args) throws Exception &amp;#123;        StreamExecutionEnvironment env &#x3D; St">
<meta property="og:type" content="article">
<meta property="og:title" content="遇到的问题">
<meta property="og:url" content="http://example.com/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6/%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="问题一： 现象：使用Java的lambda表达式写算子的实现类1234567891011121314151617181920public class WordCount &amp;#123;    public static void main(String[] args) throws Exception &amp;#123;        StreamExecutionEnvironment env &#x3D; St">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-05-06T05:31:21.051Z">
<meta property="article:modified_time" content="2023-05-06T05:31:21.051Z">
<meta property="article:author" content="CJ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6/%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '遇到的问题',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-06 13:31:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">419</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">38</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Hexo"><span class="site-name">Hexo</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">遇到的问题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-06T05:31:21.051Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-06T05:31:21.051Z" title="更新于 2023-05-06 13:31:21">2023-05-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6/">大数据实时</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="遇到的问题"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="问题一："><a href="#问题一：" class="headerlink" title="问题一："></a>问题一：</h3><ul>
<li>现象：使用Java的lambda表达式写算子的实现类<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class WordCount &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line"></span><br><span class="line">//        env.setParallelism(8);</span><br><span class="line">        DataStreamSource&lt;String&gt; source = env.readTextFile(&quot;C:\Users\CJ\Desktop\新建文本文档.txt&quot;);</span><br><span class="line"></span><br><span class="line">        SingleOutputStreamOperator&lt;Tuple2&lt;String, Integer&gt;&gt; sum = source.flatMap((String o, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector) -&gt; &#123;</span><br><span class="line">            String[] arr = o.split(&quot; &quot;);</span><br><span class="line">            for (String s : arr) &#123;</span><br><span class="line">                collector.collect(new Tuple2&lt;&gt;(s, 1));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).keyBy(o -&gt; o.f0)</span><br><span class="line">                .sum(1);</span><br><span class="line"></span><br><span class="line">        sum.print();</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
出现如下异常<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Otherwise the type has to be specified explicitly using type information</span><br></pre></td></tr></table></figure></li>
<li>原因：</li>
<li>解决：需要再添加一个返回值类型<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class WordCount &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line"></span><br><span class="line">//        env.setParallelism(8);</span><br><span class="line">        DataStreamSource&lt;String&gt; source = env.readTextFile(&quot;C:\Users\CJ\Desktop\新建文本文档.txt&quot;);</span><br><span class="line"></span><br><span class="line">        SingleOutputStreamOperator&lt;Tuple2&lt;String, Integer&gt;&gt; sum = source.flatMap((String o, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector) -&gt; &#123;</span><br><span class="line">            String[] arr = o.split(&quot; &quot;);</span><br><span class="line">            for (String s : arr) &#123;</span><br><span class="line">                collector.collect(new Tuple2&lt;&gt;(s, 1));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).returns(Types.TUPLE(Types.STRING,Types.INT)).keyBy(o -&gt; o.f0)</span><br><span class="line">                .sum(1);</span><br><span class="line"></span><br><span class="line">        sum.print();</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="问题二"><a href="#问题二" class="headerlink" title="问题二"></a>问题二</h3><ul>
<li>现象：在一个Flink程序中包含了多个Sink源时，每个Sink源都会启动一个集群进行处理。<br>这样就会产生一个问题，就是每个程序都是相同的消费者组，即每个程序都是消费组中的一个消费者，按常理每个消费者消费一个分区，会导致每个程序都缺数据。<br>但是实际测试中发现，并不会因为是同一个消费者组中的消费者导致丢数据。如果非Flink Kafka Connector的同一消费者组下的消费者抢占一个或多个分区，Flink程序会有Warn告警信息，但是还是能完整读取到数据。</li>
<li>原理：推测Flink中的Kafka Connector做了优化，不同程序中的消费者都会完整读取到topic中的数据，不会因为归属于同一个消费者而丢数据。也不会被其他消费者抢占导致无法读取数据。</li>
</ul>
<h3 id="问题三"><a href="#问题三" class="headerlink" title="问题三"></a>问题三</h3><ul>
<li>现象：使用Kafka Connector时，发现有一个分区的数据无法进行读取，导致Lag指标变大。<br>查询zookeeper发现该分区所在节点(&#x2F;brokers&#x2F;ids&#x2F;1)的注册信息中，是hostname(该域名无法通过DNS查询)，而不是IP。</li>
<li>原理：因为该Kafka节点的配置文件server.properties中的配置使用了hostname<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listeners=PLAINTEXT://bigdata2:9092</span><br><span class="line">advertised.listeners=PLAINTEXT://bigdata2:9092</span><br></pre></td></tr></table></figure>
所以在zookeeper注册的访问地址也是bigdata2。<br>而远程访问数据时会到zookeeper中查询节点的访问地址，然后通过该访问地址来访问Kafka节点。访问地址错误导致无法找到该节点，也就丢失了主分区在该节点上的topic的数据。</li>
<li>解决：将bigdata2修改为IP地址，或使用真实域名。</li>
</ul>
<h3 id="问题四"><a href="#问题四" class="headerlink" title="问题四"></a>问题四</h3><ul>
<li>现象：在配合Zookeeper实现Flink的高可用时，发现集群会经常重启，查询flink日志发现是Zookeeper集群的问题。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">org.apache.flink.shaded.zookeeper3.org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss</span><br><span class="line">	at org.apache.flink.shaded.zookeeper3.org.apache.zookeeper.KeeperException.create(KeeperException.java:102) ~[flink-shaded-zookeeper-3.4.14.jar:3.4.14-13.0]</span><br><span class="line">2023-03-19 04:34:16,070 ERROR org.apache.flink.runtime.resourcemanager.active.ActiveResourceManager [] - Fatal error occurred in ResourceManager.</span><br><span class="line">org.apache.flink.runtime.resourcemanager.exceptions.ResourceManagerException: Received an error from the LeaderElectionService.</span><br><span class="line">Caused by: org.apache.flink.shaded.zookeeper3.org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss</span><br><span class="line">	at org.apache.flink.shaded.zookeeper3.org.apache.zookeeper.KeeperException.create(KeeperException.java:102) ~[flink-shaded-zookeeper-3.4.14.jar:3.4.14-13.0]</span><br><span class="line">	at org.apache.flink.shaded.curator4.org.apache.curator.framework.imps.CuratorFrameworkImpl.checkBackgroundRetry(CuratorFrameworkImpl.java:862) ~[flink-shaded-zookeeper-3.4.14.jar:3.4.14-13.0]</span><br><span class="line">	... 10 more</span><br><span class="line">2023-03-19 04:34:16,073 ERROR org.apache.flink.runtime.entrypoint.ClusterEntrypoint        [] - Fatal error occurred in the cluster entrypoint.</span><br><span class="line">org.apache.flink.runtime.resourcemanager.exceptions.ResourceManagerException: Received an error from the LeaderElectionService.</span><br><span class="line">Caused by: org.apache.flink.shaded.zookeeper3.org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss</span><br><span class="line">	at org.apache.flink.shaded.zookeeper3.org.apache.zookeeper.KeeperException.create(KeeperException.java:102) ~[flink-shaded-zookeeper-3.4.14.jar:3.4.14-13.0]</span><br><span class="line">	at org.apache.flink.shaded.curator4.org.apache.curator.framework.imps.CuratorFrameworkImpl.checkBackgroundRetry(CuratorFrameworkImpl.java:862) ~[flink-shaded-zookeeper-3.4.14.jar:3.4.14-13.0]</span><br><span class="line">	... 10 more</span><br></pre></td></tr></table></figure></li>
<li>原理：集群网络不稳定，导致和zookeeper失联，暂时断开无法连接leadership。 如果 ZK 在一段时间内没有收到 Flink RM 的心跳 ，它会撤销领导权并通知。 查看TaskManager日志可能会获得这样的警告： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARN org.apache.flink.shaded.zookeeper3.org.apache.zookeeper.ClientCnxn - Client session timed out, have not heard from server in 40020ms for sessionid 0x404f9ca531a5d6f</span><br></pre></td></tr></table></figure>
 zk在切换leader或者网络抖动、机器繁忙、zk集群短暂无响应，都会导致curator将状态置为suspended.，会触发SUSPENDED状态，这个状态，会导致lost the leadership错误，而遇到这个错误，k8s直接就重启程序。</li>
</ul>
<p><strong>查看zookeeper日志</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">[2023-03-20 04:31:02,294] WARN fsync-ing the write ahead log in SyncThread:0 took 3377ms which will adversely effect operation latency. File size is 67108880 bytes. See the ZooKeeper troubleshooting guide (org.apache.zookeeper.server.persistence.FileTxnLog)</span><br><span class="line">[2023-03-20 04:31:09,584] INFO Revalidating client: 0x3ef54ef710001 (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">[2023-03-20 04:31:10,279] INFO Revalidating client: 0x103ef54ef020000 (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">[2023-03-20 04:31:15,815] INFO Notification: 2 (message format version), 1 (n.leader), 0x2f00000087 (n.zxid), 0x2f (n.round), LOOKING (n.state), 1 (n.sid), 0x2f (n.peerEPoch), FOLLOWING (my state)0 (n.config version) (org.apache.zookeeper.server.quorum.FastLeaderElection)</span><br><span class="line">[2023-03-20 07:28:07,259] WARN fsync-ing the write ahead log in SyncThread:0 took 8342ms which will adversely effect operation latency. File size is 67108880 bytes. See the ZooKeeper troubleshooting guide (org.apache.zookeeper.server.persistence.FileTxnLog)</span><br><span class="line">[2023-03-20 08:24:14,833] WARN Exception when following the leader (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">java.io.EOFException</span><br><span class="line">	at java.io.DataInputStream.readInt(DataInputStream.java:392)</span><br><span class="line">	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:84)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)</span><br><span class="line">	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:118)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:158)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:92)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1253)</span><br><span class="line">[2023-03-20 08:24:17,787] WARN Exception causing close of session 0x203f210cab90000: Socket closed (org.apache.zookeeper.server.NIOServerCnxn)</span><br><span class="line">[2023-03-20 08:24:14,839] INFO Revalidating client: 0x103ef54ef020000 (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">[2023-03-20 08:24:14,839] WARN Unable to read additional data from client sessionid 0x103ef54ef020000, likely client has closed socket (org.apache.zookeeper.server.NIOServerCnxn)</span><br><span class="line">[2023-03-20 08:24:17,787] INFO shutdown called (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">java.lang.Exception: shutdown Follower</span><br><span class="line">	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:201)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1257)</span><br><span class="line">[2023-03-20 08:24:17,788] WARN Exception causing close of session 0x103ef54ef020000: Socket closed (org.apache.zookeeper.server.NIOServerCnxn)</span><br><span class="line">[2023-03-20 08:24:46,928] WARN Exception causing close of session 0x0: ZooKeeperServer not running (org.apache.zookeeper.server.NIOServerCnxn)</span><br><span class="line">[2023-03-20 08:24:46,935] INFO Shutting down (org.apache.zookeeper.server.SyncRequestProcessor)</span><br><span class="line">[2023-03-20 08:24:47,264] WARN fsync-ing the write ahead log in SyncThread:0 took 48348ms which will adversely effect operation latency. File size is 67108880 bytes. See the ZooKeeper troubleshooting guide (org.apache.zookeeper.server.persistence.FileTxnLog)</span><br><span class="line">[2023-03-20 08:24:47,265] WARN Closing connection to leader, exception during packet send (org.apache.zookeeper.server.quorum.SendAckRequestProcessor)</span><br><span class="line">java.net.SocketException: Socket closed</span><br><span class="line">	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:118)</span><br><span class="line">	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)</span><br><span class="line">	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)</span><br><span class="line">	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.Learner.writePacket(Learner.java:144)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.SendAckRequestProcessor.flush(SendAckRequestProcessor.java:62)</span><br><span class="line">	at org.apache.zookeeper.server.SyncRequestProcessor.flush(SyncRequestProcessor.java:186)</span><br><span class="line">	at org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:113)</span><br><span class="line">[2023-03-20 08:24:47,265] INFO SyncRequestProcessor exited! (org.apache.zookeeper.server.SyncRequestProcessor)</span><br><span class="line">[2023-03-20 08:24:47,265] WARN PeerState set to LOOKING (org.apache.zookeeper.server.quorum.QuorumPeer)</span><br><span class="line">[2023-03-20 08:24:47,266] INFO LOOKING (org.apache.zookeeper.server.quorum.QuorumPeer)</span><br><span class="line">[2023-03-20 08:24:47,266] INFO New election. My id =  0, proposed zxid=0x2f0000042b (org.apache.zookeeper.server.quorum.FastLeaderElection)</span><br><span class="line">[2023-03-20 08:24:47,266] INFO Notification: 2 (message format version), 0 (n.leader), 0x2f0000042b (n.zxid), 0x2f (n.round), LOOKING (n.state), 0 (n.sid), 0x2f (n.peerEPoch), LOOKING (my state)0 (n.config version) (org.apache.zookeeper.server.quorum.FastLeaderElection)</span><br><span class="line">[2023-03-20 08:24:47,268] INFO Notification: 2 (message format version), 2 (n.leader), 0x2e000000dc (n.zxid), 0x2e (n.round), FOLLOWING (n.state), 1 (n.sid), 0x2f (n.peerEPoch), LOOKING (my state)0 (n.config version) (org.apache.zookeeper.server.quorum.FastLeaderElection)</span><br><span class="line">[2023-03-20 08:24:47,268] INFO Notification: 2 (message format version), 2 (n.leader), 0x2e000000dc (n.zxid), 0x2e (n.round), LEADING (n.state), 2 (n.sid), 0x2f (n.peerEPoch), LOOKING (my state)0 (n.config version) (org.apache.zookeeper.server.quorum.FastLeaderElection)</span><br><span class="line">[2023-03-20 08:24:47,268] INFO FOLLOWING (org.apache.zookeeper.server.quorum.QuorumPeer)</span><br><span class="line">[2023-03-20 08:24:47,268] INFO minSessionTimeout set to 4000 (org.apache.zookeeper.server.ZooKeeperServer)</span><br><span class="line">[2023-03-20 08:24:47,268] INFO maxSessionTimeout set to 40000 (org.apache.zookeeper.server.ZooKeeperServer)</span><br><span class="line">[2023-03-20 08:24:47,268] INFO Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /opt/module/kafka_2.12-2.4.1/zookeeper/log/version-2 snapdir /opt/module/kafka_2.12-2.4.1/zookeeper/data/version-2 (org.apache.zookeeper.server.ZooKeeperServer)</span><br><span class="line">[2023-03-20 08:24:47,268] INFO FOLLOWING - LEADER ELECTION TOOK - 0 MS (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">[2023-03-20 08:24:47,270] WARN Unexpected exception, tries=0, remaining init limit=19999, connecting to /192.168.101.195:2888 (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">java.net.ConnectException: 拒绝连接 (Connection refused)</span><br><span class="line">	at java.net.PlainSocketImpl.socketConnect(Native Method)</span><br><span class="line">	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)</span><br><span class="line">	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)</span><br><span class="line">	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)</span><br><span class="line">	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)</span><br><span class="line">	at java.net.Socket.connect(Socket.java:589)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.Learner.sockConnect(Learner.java:233)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.Learner.connectToLeader(Learner.java:262)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:77)</span><br><span class="line">	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1253)</span><br><span class="line">......</span><br><span class="line">[2023-03-20 08:24:48,405] INFO Notification: 2 (message format version), 1 (n.leader), 0x2f0000042b (n.zxid), 0x2f (n.round), LOOKING (n.state), 1 (n.sid), 0x2f (n.peerEPoch), FOLLOWING (my state)0 (n.config version) (org.apache.zookeeper.server.quorum.FastLeaderElection)</span><br><span class="line">[2023-03-20 08:24:48,405] INFO Notification: 2 (message format version), 2 (n.leader), 0x2f0000042b (n.zxid), 0x2f (n.round), LOOKING (n.state), 1 (n.sid), 0x2f (n.peerEPoch), FOLLOWING (my state)0 (n.config version) (org.apache.zookeeper.server.quorum.FastLeaderElection)</span><br><span class="line">[2023-03-20 08:24:48,405] INFO Notification: 2 (message format version), 2 (n.leader), 0x2f0000042b (n.zxid), 0x2f (n.round), LOOKING (n.state), 2 (n.sid), 0x2f (n.peerEPoch), FOLLOWING (my state)0 (n.config version) (org.apache.zookeeper.server.quorum.FastLeaderElection)</span><br><span class="line">[2023-03-20 08:24:49,279] INFO Getting a diff from the leader 0x2f0000042b (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">[2023-03-20 08:24:49,279] INFO Learner received NEWLEADER message (org.apache.zookeeper.server.quorum.Learner)</span><br><span class="line">[2023-03-20 08:24:49,281] INFO Learner received UPTODATE message (org.apache.zookeeper.server.quorum.Learner)</span><br></pre></td></tr></table></figure>
<p>估计异常原因：「FOLLOWER」在跟「LEADER」同步時，fsync操做時間過長，致使超時。</p>
<p>解决：增長「tickTime」或者「initLimit和syncLimit」的值，或者二者都增大。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># The number of milliseconds of each tick</span><br><span class="line">tickTime=4000</span><br><span class="line"># The number of ticks that the initial </span><br><span class="line"># synchronization phase can take</span><br><span class="line">initLimit=20</span><br><span class="line"># The number of ticks that can pass between </span><br><span class="line"># sending a request and getting an acknowledgement</span><br><span class="line">syncLimit=10</span><br></pre></td></tr></table></figure>

<h3 id="问题五"><a href="#问题五" class="headerlink" title="问题五"></a>问题五</h3><ul>
<li>现象：使用Lag开窗函数，存在水位线并且order by的字段存在相同值时，会导致丢失数据</li>
<li>原因：猜测是将数据存储在MapState中，orderby的字段作为key，相同的key导致先进入的数据被后面的数据覆盖。<br>Flink1.13.0存在的bug:：lag完全不能用，会得到错误的结果<br>Flink1.13.6存在的bug：lag排序字段有相同值，会导致lag到的数据有问题，不是正确的记录。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3&gt; +I[IntegratedStove, 0LU98ys80fDU8TvsAAN3000000, 3167, &#123;&#125;, a1YTZpQDGwn, 1680235249145, 0LU98ys80fDU8TvsAAN3, &#123;&quot;ErrorCodeShow&quot;:&#123;&quot;value&quot;:15,&quot;time&quot;:1680235249145&#125;,&quot;ErrorCode&quot;:&#123;&quot;value&quot;:16384,&quot;time&quot;:1680235249145&#125;&#125;, &#123;&quot;ErrorCodeShow&quot;:&#123;&quot;value&quot;:15,&quot;time&quot;:1680235234288&#125;,&quot;ErrorCode&quot;:&#123;&quot;value&quot;:16384,&quot;time&quot;:1680235234288&#125;&#125;]</span><br><span class="line">3&gt; +I[IntegratedStove, 0LU98ys80fDU8TvsAAN3000000, 3177, &#123;&#125;, a1YTZpQDGwn, 1680235274230, 0LU98ys80fDU8TvsAAN3, &#123;&quot;ErrorCodeShow&quot;:&#123;&quot;value&quot;:0,&quot;time&quot;:1680235274229&#125;,&quot;ErrorCode&quot;:&#123;&quot;value&quot;:0,&quot;time&quot;:1680235274229&#125;&#125;, &#123;&quot;ErrorCodeShow&quot;:&#123;&quot;value&quot;:0,&quot;time&quot;:1680235274229&#125;,&quot;ErrorCode&quot;:&#123;&quot;value&quot;:0,&quot;time&quot;:1680235274229&#125;&#125;]</span><br><span class="line">3&gt; +I[IntegratedStove, 0LU98ys80fDU8TvsAAN3000000, 3175, &#123;&#125;, a1YTZpQDGwn, 1680235274230, 0LU98ys80fDU8TvsAAN3, &#123;&quot;ErrorCodeShow&quot;:&#123;&quot;value&quot;:15,&quot;time&quot;:1680235274230&#125;,&quot;ErrorCode&quot;:&#123;&quot;value&quot;:16384,&quot;time&quot;:1680235274230&#125;&#125;, &#123;&quot;ErrorCodeShow&quot;:&#123;&quot;value&quot;:0,&quot;time&quot;:1680235274229&#125;,&quot;ErrorCode&quot;:&#123;&quot;value&quot;:0,&quot;time&quot;:1680235274229&#125;&#125;]</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="问题六"><a href="#问题六" class="headerlink" title="问题六"></a>问题六</h3><ul>
<li>现象：启动KafkaSink的EXCATLY_ONCE后，会报错<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">2023-04-03 14:53:04       WARN (org.apache.flink.streaming.connectors.kafka.FlinkKafkaConsumerBase:onException) - Consumer subtask 6 failed async Kafka commit.</span><br><span class="line">org.apache.kafka.clients.consumer.RetriableCommitFailedException: Offset commit failed with a retriable exception. You should retry committing the latest consumed offsets.</span><br><span class="line">Caused by: org.apache.kafka.common.errors.DisconnectException</span><br><span class="line">2023-04-03 14:55:56       WARN (org.apache.flink.runtime.checkpoint.CheckpointCoordinator:receiveAcknowledgeMessage) - Received late message for now expired checkpoint attempt 7 from task dde6074f653ffc36b304382e60c49716 of job 03ab02d2bfd43584307e0eb4015c7609 at 3ff7375c-9af8-4b56-8714-dde613722b49 @ 127.0.0.1 (dataPort=-1).</span><br><span class="line">2023-04-03 14:56:57       WARN (org.apache.kafka.common.utils.AppInfoParser:registerAppInfo) - Error registering AppInfo mbean</span><br><span class="line">javax.management.InstanceAlreadyExistsException: kafka.producer:type=app-info,id=&quot;producer-KeyedProcess -&gt; (Sink: Unnamed, Sink: Unnamed)-62178c8ca330ae8cd73d75beef1312de-12&quot;</span><br><span class="line">	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)</span><br><span class="line">	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)</span><br><span class="line">	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)</span><br><span class="line">	at org.apache.kafka.common.utils.AppInfoParser.registerAppInfo(AppInfoParser.java:64)</span><br><span class="line">	at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:426)</span><br><span class="line">	at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:298)</span><br><span class="line">	at org.apache.flink.streaming.connectors.kafka.internals.FlinkKafkaInternalProducer.&lt;init&gt;(FlinkKafkaInternalProducer.java:79)</span><br><span class="line">	at org.apache.flink.streaming.connectors.kafka.FlinkKafkaProducer.lambda$abortTransactions$3(FlinkKafkaProducer.java:1282)</span><br><span class="line">	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)</span><br><span class="line">	at java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1556)</span><br><span class="line">	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)</span><br><span class="line">	at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:291)</span><br><span class="line">	at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:731)</span><br><span class="line">	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)</span><br><span class="line">	at java.util.concurrent.ForkJoinTask.doInvoke(ForkJoinTask.java:401)</span><br><span class="line">	at java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:734)</span><br><span class="line">	at java.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:160)</span><br><span class="line">	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:174)</span><br><span class="line">	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)</span><br><span class="line">	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)</span><br><span class="line">	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:583)</span><br><span class="line">	at org.apache.flink.streaming.connectors.kafka.FlinkKafkaProducer.abortTransactions(FlinkKafkaProducer.java:1263)</span><br><span class="line">	at org.apache.flink.streaming.connectors.kafka.FlinkKafkaProducer.cleanUpUserContext(FlinkKafkaProducer.java:1249)</span><br><span class="line">	at org.apache.flink.streaming.connectors.kafka.FlinkKafkaProducer.finishRecoveringContext(FlinkKafkaProducer.java:1224)</span><br><span class="line">	at org.apache.flink.streaming.api.functions.sink.TwoPhaseCommitSinkFunction.initializeState(TwoPhaseCommitSinkFunction.java:380)</span><br><span class="line">	at org.apache.flink.streaming.connectors.kafka.FlinkKafkaProducer.initializeState(FlinkKafkaProducer.java:1195)</span><br><span class="line">	at org.apache.flink.streaming.util.functions.StreamingFunctionUtils.tryRestoreFunction(StreamingFunctionUtils.java:189)</span><br><span class="line">	at org.apache.flink.streaming.util.functions.StreamingFunctionUtils.restoreFunctionState(StreamingFunctionUtils.java:171)</span><br><span class="line">	at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.initializeState(AbstractUdfStreamOperator.java:96)</span><br><span class="line">	at org.apache.flink.streaming.api.operators.StreamOperatorStateHandler.initializeOperatorState(StreamOperatorStateHandler.java:118)</span><br><span class="line">	at org.apache.flink.streaming.api.operators.AbstractStreamOperator.initializeState(AbstractStreamOperator.java:290)</span><br><span class="line">	at org.apache.flink.streaming.runtime.tasks.OperatorChain.initializeStateAndOpenOperators(OperatorChain.java:441)</span><br><span class="line">	at org.apache.flink.streaming.runtime.tasks.StreamTask.restoreGates(StreamTask.java:585)</span><br><span class="line">	at org.apache.flink.streaming.runtime.tasks.StreamTaskActionExecutor$1.call(StreamTaskActionExecutor.java:55)</span><br><span class="line">	at org.apache.flink.streaming.runtime.tasks.StreamTask.executeRestore(StreamTask.java:565)</span><br><span class="line">	at org.apache.flink.streaming.runtime.tasks.StreamTask.runWithCleanUpOnFail(StreamTask.java:650)</span><br><span class="line">	at org.apache.flink.streaming.runtime.tasks.StreamTask.restore(StreamTask.java:540)</span><br><span class="line">	at org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:759)</span><br><span class="line">	at org.apache.flink.runtime.taskmanager.Task.run(Task.java:566)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure></li>
<li>原因：</li>
<li></li>
</ul>
<h3 id="问题七"><a href="#问题七" class="headerlink" title="问题七"></a>问题七</h3><ul>
<li>现象：在修改了Flink的代码之后，从原来的checkpoint启动时报错如下<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java.util.concurrent.CompletionException: java.lang.IllegalStateException: Failed to rollback to checkpoint/savepoint hdfs://192.168.101.193:8020/flink/checkpoint/msas/msas_device_exceptions/bd512804dd5bce0053dc8a8e1d94f879/chk-2568. Cannot map checkpoint/savepoint state for operator ba40499bacce995f15693b1735928377 to the new program, because the operator is not available in the new program. If you want to allow to skip this, you can set the --allowNonRestoredState option on the CLI.</span><br></pre></td></tr></table></figure>
如果添加参数 –allowNonRestoredState 就可以成功启动，但是不知道状态是否成功恢复，修改的代码逻辑是否生效。<br>实际使用中发现，添加–allowNonRestoredState并没有造成已有的状态丢失的情况，而且修改的代码逻辑也生效了。</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">CJ</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6/%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">http://example.com/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6/%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/" title="在线教育项目"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">在线教育项目</div></div></a></div><div class="next-post pull-right"><a href="/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%97%B6/%E9%A1%B9%E7%9B%AE%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0/" title="项目知识笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">项目知识笔记</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CJ</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">419</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">38</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%B8%80%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">问题一：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%BA%8C"><span class="toc-number">2.</span> <span class="toc-text">问题二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%B8%89"><span class="toc-number">3.</span> <span class="toc-text">问题三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%9B%9B"><span class="toc-number">4.</span> <span class="toc-text">问题四</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%BA%94"><span class="toc-number">5.</span> <span class="toc-text">问题五</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%85%AD"><span class="toc-number">6.</span> <span class="toc-text">问题六</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%B8%83"><span class="toc-number">7.</span> <span class="toc-text">问题七</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/MySQL/%E6%B3%A8%E8%A7%A3@Select%E5%92%8C@Insert/" title="注解@Select和@Insert">注解@Select和@Insert</a><time datetime="2023-05-06T05:48:28.906Z" title="发表于 2023-05-06 13:48:28">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6/%E6%B3%A8%E8%A7%A3@EnableAutoConfiguration/" title="注解@EnableAutoConfiguration">注解@EnableAutoConfiguration</a><time datetime="2023-05-06T05:48:06.027Z" title="发表于 2023-05-06 13:48:06">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%A6%BB%E7%BA%BF/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7%E6%A1%86%E6%9E%B6/" title="大数据集群监控框架">大数据集群监控框架</a><time datetime="2023-05-06T05:42:56.298Z" title="发表于 2023-05-06 13:42:56">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E9%AB%98%E5%B9%B6%E5%8F%91/HashMap%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98%E5%8F%8AConcurrentHashMap%E5%8E%9F%E7%90%86/" title="HashMap并发问题及ConcurrentHashMap原理">HashMap并发问题及ConcurrentHashMap原理</a><time datetime="2023-05-06T05:31:21.103Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E9%AB%98%E5%B9%B6%E5%8F%91/Stream%E5%8E%9F%E7%90%86/" title="Stream原理">Stream原理</a><time datetime="2023-05-06T05:31:21.103Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By CJ</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>