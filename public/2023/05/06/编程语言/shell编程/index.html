<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>shell编程 | Hexo</title><meta name="author" content="CJ"><meta name="copyright" content="CJ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="系统变量：&#x2F;etc&#x2F;profile用户变量：&#x2F;.bash_profile | ~&#x2F;.bash_login | ~&#x2F;.profile &#x2F;etc&#x2F;profile.d&#x2F;*login 和 non-login shelllogin方式加载顺序：etc&#x2F;profile -&gt; ~&#x2F;.bash_profile">
<meta property="og:type" content="article">
<meta property="og:title" content="shell编程">
<meta property="og:url" content="http://example.com/2023/05/06/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/shell%E7%BC%96%E7%A8%8B/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="系统变量：&#x2F;etc&#x2F;profile用户变量：&#x2F;.bash_profile | ~&#x2F;.bash_login | ~&#x2F;.profile &#x2F;etc&#x2F;profile.d&#x2F;*login 和 non-login shelllogin方式加载顺序：etc&#x2F;profile -&gt; ~&#x2F;.bash_profile">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-05-06T05:31:21.079Z">
<meta property="article:modified_time" content="2023-05-06T05:31:21.079Z">
<meta property="article:author" content="CJ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/05/06/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/shell%E7%BC%96%E7%A8%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'shell编程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-06 13:31:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">419</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">38</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Hexo"><span class="site-name">Hexo</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">shell编程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-06T05:31:21.079Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-06T05:31:21.079Z" title="更新于 2023-05-06 13:31:21">2023-05-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="shell编程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>系统变量：&#x2F;etc&#x2F;profile<br>用户变量：<del>&#x2F;.bash_profile | ~&#x2F;.bash_login | ~&#x2F;.profile &#x2F;etc&#x2F;profile.d&#x2F;*<br>login 和 non-login shell<br>login方式加载顺序：etc&#x2F;profile -&gt; ~&#x2F;.bash_profile | ~&#x2F;.bash_login | ~&#x2F;.profile(加载时，按照上述顺序进行加载，只要加载到一个文件就停止加载)<br>non-login方式加载顺序：不会加载 etc&#x2F;profile，会加载</del>&#x2F;.bashrc和profile.d文件夹下的脚本。</p>
<h1 id="常用的正则表达式语法"><a href="#常用的正则表达式语法" class="headerlink" title="常用的正则表达式语法"></a><strong>常用的正则表达式语法</strong></h1><p>\   转义<br>^   一行的开头      例：^R——表示以R开头的行<br>$   匹配一行的结束        例：R$表示以R结尾的行<br>*  表示上一个子式匹配0次或多次，贪心匹配<br>.   匹配一个任意的字符（除了换行符）<br>.<em>匹配任意字符串<br>[]  表示匹配某个范围内的字符    例：[a-z]——匹配一个a-z之间的字符</em>*   [a-z]<em>—–匹配任意字母字符串</em>*<br>&#x2F;^$&#x2F; 正则表达式代表空行</p>
<p>将字符串按空格分割转为数组：  <code>arr=($str)</code></p>
<h1 id="小知识："><a href="#小知识：" class="headerlink" title="小知识："></a><strong>小知识：</strong></h1><p>①Linux引用系统变量前加%</p>
<p>Wind用于系统变量前后都加%</p>
<p>②Shell中语句以；或换行为结束 if [] ; then  或 if[] &#x2F;n  then</p>
<p>③程序执行后会返回执行状态码：0表示正常执行，1表示没有执行完。$？返回上一次执行状态。</p>
<p>也可以判断上条语句的判断是是否是true（true返回0），false（false返回1）。</p>
<p>④Shell中的case语言每个分支以；；结尾，不会像java一样不写break有雪崩。</p>
<p>⑤条件非空即为true，[ hxr]返回true，[] 返回false。</p>
<p>条件非空即为true，[ ！hxr]返回false，[！] 返回true。</p>
<p>⑥Sed  -e    只有一个指令可以省略，多个就要加。</p>
<p>⑦；Awk：</p>
<p>Pattern可以是BEGIN和END，BEGIN｛｝  END｛｝ 在流入前和流入后执行</p>
<p>Print是awk中的语句，不是shell语言    视频15：30</p>
<p>⑧-v 可以指定一个用户变量   -v sum&#x3D;0</p>
<p>⑨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat  &lt;&lt;EOF  &gt;  test.sh</span><br><span class="line">DEVICE=eth0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>向test.sh文件中写入EOF之前的内容。</p>
<p>⑩复制命令：</p>
<p>①cp（copy）：只能在本机中复制</p>
<p>cp  -r  test  &#x2F;root</p>
<p>②scp（secure copy）：可以复制文件给远程主机</p>
<p>scp  -r  test.sh  hxr@bigdata2:&#x2F;root</p>
<p>③rsync（remote sync）：功能与scp相同，但是不会改文件属性</p>
<p>rsync  -av  test.sh  hxr@bigdata2:&#x2F;root</p>
<br>
# 第1章 Shell概述

<p><img src="/shell%E7%BC%96%E7%A8%8B.assets%5Cd1f367f615be413c85afa3f597b6aa1a.png" alt="image.png"></p>
<p>Shell是命令行解释器，用来逐句解释并执行shell语句，调用操作系统的内核。</p>
<br>
# 第2章Shell解析器

<p>1.&#x2F;etc&#x2F;shells  中存储着shell语言标准。</p>
<p>[hxr@bigdata2 bin]$ cat  &#x2F;etc&#x2F;shells</p>
<p>&#x2F;bin&#x2F;sh</p>
<p>&#x2F;bin&#x2F;bash</p>
<p>&#x2F;sbin&#x2F;nologin</p>
<p>&#x2F;bin&#x2F;dash</p>
<p>&#x2F;bin&#x2F;tcsh</p>
<p>&#x2F;bin&#x2F;csh</p>
<p>2. sh是bash的一个软连接</p>
<p>[hxr@bigdata2 bin]$ ll | grep bash</p>
<p>-rwxr-xr-x. 1 root root 941880 5月  11 2016 bash</p>
<p>lrwxrwxrwx. 1 root root      4 5月  27 2017 sh -&gt; bash</p>
<p>Cent os通过软链接&#x2F;bin&#x2F;sh来调用&#x2F;bin&#x2F;bash解释器，是红帽系下的一个系统分支。&#x2F;sbin&#x2F;nologin是未登录情况下的解释器，用于远程控制未登录的账户，ssh hadoop103 ‘ls’</p>
<p>3.Centos默认的解析器是bash</p>
<p>[hxr@bigdata2 bin]$ echo $SHELL<br>&#x2F;bin&#x2F;bash</p>
<br>
# 第3章 Shell脚本入门

<p>解释性语言可以用脚本执行，逐行解释执行。</p>
<p><strong>编写脚本：</strong></p>
<p>#！&#x2F;bin&#x2F;bash  指定脚本解释器</p>
<p>echo Helloworld  执行语句</p>
<p><strong>执行脚本：</strong></p>
<p>bash &lt;文件名&gt;   用bash解释器解释执行该文件</p>
<p>执行脚本的三种方法：</p>
<p>①采用输入脚本的绝对路径或相对路径执行脚本（必须具有可执行权限+x）</p>
<p>②采用bash或sh+脚本的相对路径或绝对路径（不用赋予脚本+x权限）</p>
<p>③放到bash和sh所在的文件夹（&#x2F;bin)下，则在别处可以直接运行脚本。&#x2F;home&#x2F;hxr&#x2F;bin目录下实现全局使用，将xsync移动到&#x2F;usr&#x2F;local&#x2F;bin也可以。</p>
<p>例：xsync脚本放到&#x2F;bin文件夹下，在任何路径下输入xsync jdk.1.8都可以运行（也是因此需要发送文件的实际物理路径。见hadoop笔记中的集群环境配置）。</p>
<p>如果在执行时指定，那么脚本内的指定脚本解释器语句会变成注释。脚本中最好写上解释器，这样可以自执行。</p>
<p>执行时调用bash解释器执行方法，本质是bash解析器帮你执行脚本，所以脚本本身不需要执行权限。第二种自执行方法，本质是脚本需要自己执行，所以需要执行权限。</p>
<p><strong>脚本执行方式和shell的子进程和变量的作用范围</strong><br>注意：<br>①  .&#x2F;<em>.sh  sh .&#x2F;</em>.sh 或 bash .&#x2F;<em>.sh 三种执行脚本的方式都是重启一个子shell，在子shell中执行此脚本，每个脚本在各自的子进程中执行。<br>②  source  .&#x2F;</em>.sh 和 . .&#x2F;*.sh的执行方式是等价的，两种执行方式都是在当前shell进程中执行，而不是重启子shell进程。<br>Shell语句只有一种变量：字符串,作用域为当前的shell下，每个shell终端下就是不同的shell域，一个shell就是一个进程。</p>
<p>单敲bash就创建一个子shell，再敲exit返回原shell。可以通过ps -ef查看子shell的父shell进程。</p>
<p>export  a   会将a的作用域递归扩展到其子shell中。</p>
<br>
# 第4章 Shell中的变量

<p>Shell语句只有一种变量：字符串</p>
<h2 id="4-1-系统变量"><a href="#4-1-系统变量" class="headerlink" title="4.1 系统变量"></a>4.1 系统变量</h2><p>常用系统变量 $HOME、$PWD、$SHELL、$USER</p>
<p>set  显示当前Shell中所有变量</p>
<h2 id="4-2-自定义变量"><a href="#4-2-自定义变量" class="headerlink" title="4.2 自定义变量"></a>4.2 自定义变量</h2><p>1．基本语法</p>
<p>（1）定义变量：变量&#x3D;值 </p>
<p>（2）撤销变量：unset 变量</p>
<p>（3）声明静态变量：readonly变量，注意：不能修改，不能unset</p>
<p>2．变量定义规则</p>
<p>（1）变量名称可以由字母、数字和下划线组成，但是不能以数字开头，环境变量名建  议大写。</p>
<p>（2）等号两侧不能有空格</p>
<p>（3）在bash中，变量默认类型都是字符串类型，无法直接进行数值运算。</p>
<p>（4）变量的值如果有空格，需要使用双引号或单引号括起来。</p>
<p>3.变量提升为全局环境变量</p>
<p>export  a   会将a的作用域递归扩展到其子shell中。</p>
<p>或直接export  A&#x3D;值  直接将A定义为全局变量</p>
<h2 id="4-3-特殊变量：-n"><a href="#4-3-特殊变量：-n" class="headerlink" title="4.3 特殊变量：$n"></a>4.3 特殊变量：$n</h2><p>$n  （功能描述：n为数字，$0代表该脚本名称，$1-$9代表第一到第九个参数，，十以上的参数需要用大括号包含，如${10}）</p>
<h2 id="4-4-特殊变量："><a href="#4-4-特殊变量：" class="headerlink" title="4.4 特殊变量：$#"></a>4.4 特殊变量：$#</h2><p>$#  （功能描述：获取所有输入参数个数，常用于循环）</p>
<h2 id="4-5-特殊变量：-、"><a href="#4-5-特殊变量：-、" class="headerlink" title="4.5 特殊变量：$*、$@"></a>4.5 特殊变量：$*、$@</h2><p>$*  （功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体）</p>
<p>$@  （功能描述：这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待）</p>
<p>代表命令行中所有的参数。可用于for循环遍历命令行参数，$*和$@都表示传递给函数或脚本的所有参数，不被双引号” “包含时，都以$1 $2 …$n的形式输出所有参数。都被双引号包含时，$*代表一个整体，遍历就输出一个字符串。$@把参数区分对待，遍历可以输出每个命令行参数。</p>
<h2 id="4-6-特殊变量：-？"><a href="#4-6-特殊变量：-？" class="headerlink" title="4.6 特殊变量：$？"></a>4.6 特殊变量：$？</h2><p>$？  （功能描述：最后一次执行的命令的返回状态。变量的值为0，证明上一个命令正确执行；变量的值为非0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。）</p>
<h2 id="4-7-，-，-，-，-，-作用与区别"><a href="#4-7-，-，-，-，-，-作用与区别" class="headerlink" title="4.7 $()，` `，${}，$[]，$(())，[ ] (( )) [[ ]] 作用与区别"></a>4.7 $()，` `，${}，$[]，$(())，[ ] (( )) [[ ]] 作用与区别</h2><ul>
<li>$()和` `都是用来做命令替换，$()并不是所有shell都支持</li>
<li>${}用做变量替换</li>
<li>$[]和$(())都是进行数学运算的。但是注意，bash只能作整数运算，对于浮点数是当作字符串处理的。</li>
<li>[ ]即为test命令的另一种形式。但要注意许多：<br>1.你必须在左括号的右侧和右括号的左侧各加一个空格，否则会报错。<br>2.test命令使用标准的数学比较符号来表示字符串的比较，而用文本符号来表示数值的比较。很多人会记反了。使用反了，shell可能得不到正确的结果。<br>3.大于符号或小于符号必须要转义，否则会被理解成重定向。</li>
<li>(( ))和[[ ]]分别是[ ]的针对数学比较表达式和字符串表达式的加强版。<br>其中(( ))，不需要再将表达式里面的大小于符号转义，除了可以使用标准的数学运算符外，还增加了以下符号：![image.png](shell编程.assets10ab34b9977425c8731ea1dbd3535a7.png)</li>
</ul>
<br>
## 4.8 字符串切分
在shell中没有类似split方法，可以通过其他方法实现，如通过逗号切分字符串"177,178"
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">str=177,178</span><br><span class="line">array=($&#123;str//,/ &#125;)</span><br><span class="line">for host in $&#123;array[@]&#125;</span><br><span class="line">do</span><br><span class="line"> echo $host</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<br>
# 第5章 运算符

<p>1．基本语法</p>
<p>（1）“$((运算式))”或“$[运算式]”  最常用$[ 运算式 ]</p>
<p>例：S&#x3D;$[(2+3)*4]    通过echo S 打印得到20</p>
<p>（2）expr  + , - , *,  &#x2F;,  %    加，减，乘，除，取余</p>
<p>注意：expr运算符间要有空格 </p>
<p>例1：expr  3  *  2   打印得到6</p>
<p>例2：expr <code>expr 2 + 3</code> * 4  打印得到20</p>
<br>
# 第6章条件判断

<p>1．基本语法</p>
<p>[ condition ]（注意condition前后要有空格）</p>
<p>注意：条件非空即为true，[ hxr ]返回true，[] 返回false。</p>
<p>2. 常用判断条件</p>
<p>-z判断字符串是否为空串</p>
<p>取反  if !(test -z $files )</p>
<p>（1）两个整数之间比较</p>
<p>&#x3D; 字符串比较</p>
<p>-lt 小于（less than）  -le 小于等于（less equal）</p>
<p>-eq 等于（equal）  -gt 大于（greater than）</p>
<p>-ge 大于等于（greater equal）  -ne 不等于（Not equal）</p>
<p>（2）按照文件权限进行判断</p>
<p>-r 有读的权限（read）  -w 有写的权限（write）</p>
<p>-x 有执行的权限（execute）</p>
<p>（3）按照文件类型进行判断</p>
<p>-f 文件存在并且是一个常规的文件（file）</p>
<p>-e 文件存在（existence）  -d 文件存在并是一个目录（directory）</p>
<p>-n  “$1” 判断字符串是否为空</p>
<p>或直接if [ $1 ] 如果未传参，则为false。</p>
<p>3.多条件判断</p>
<p>[ condition ] &amp;&amp; [ condition ] 与</p>
<p>[ condition ] || [ condition ]  或</p>
<p><strong>例：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">if [[ ! 1 -eq 2 ]] &amp;&amp; [[ 2 -eq 2 ]];then</span><br><span class="line"> echo true</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<br>
# 第7章 流程控制（重点）

<h2 id="7-1-if-判断"><a href="#7-1-if-判断" class="headerlink" title="7.1 if 判断"></a><strong>7.1 if 判断</strong></h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件判断 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  程序</span><br><span class="line"><span class="keyword">elif</span> [ 条件判断 ]</span><br><span class="line">  程序</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  程序</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>注意事项：<br>（1）[ 条件判断式 ]，中括号和条件判断式之间必须有空格<br>（2）if后要有空格</p>
<h2 id="7-2-case-语句"><a href="#7-2-case-语句" class="headerlink" title="7.2 case 语句"></a><strong>7.2 case 语句</strong></h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;字符串&quot;</span>)</span><br><span class="line">程序</span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;字符串&quot;</span>)</span><br><span class="line">程序</span><br><span class="line">;;</span><br><span class="line"><span class="string">&quot;*&quot;</span>)</span><br><span class="line">程序</span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h2 id="7-3-for-循环"><a href="#7-3-for-循环" class="headerlink" title="7.3 for 循环"></a><strong>7.3 for 循环</strong></h2><p>1．基本语法1</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( 初始值;循环控制条件;变量变化 ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  程序</span><br><span class="line">Done</span><br></pre></td></tr></table></figure>

<p>1．基本语法2（遍历，类似java中的增强for）<br>｛109…100｝表示109到100的所有数</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 值1 值2 值3…</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   程序</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><strong>for循环遍历命令行参数</strong><br>$* 和 $@ 都表示传递给函数或脚本的所有参数，不被双引号“”包含时，都以$1 $2 …$n的形式输出所有参数。都被双引号包含时，$*代表一个整体，遍历就输出一个字符串。$@把参数区分对待，可以输出每个命令行参数。</p>
<h2 id="7-4-while-循环"><a href="#7-4-while-循环" class="headerlink" title="7.4 while 循环"></a><strong>7.4 while 循环</strong></h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ 条件判断式 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  程序</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<br>
**退出脚本**
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">exit 1</span><br></pre></td></tr></table></figure>
可以使用exit命令来退出脚本任务；exit 1 表示任务失败，exit 0 表示任务成功。

<br>
## 7.4 并行执行
使用 `&` 表示启动另一个线程执行，不阻塞主线程。`wait`表示等待之前的所有线程完成。
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">start-exec()&#123;</span><br><span class="line">    for host in cos-bigdata-test-hadoop-01 cos-bigdata-test-hadoop-02 cos-bigdata-test-hadoop-03;do</span><br><span class="line">        (ssh $&#123;host&#125; &quot;sudo -i -u azkaban bash -c &#x27;cd /opt/module/azkaban-3.84.4/exec/;bin/start-exec.sh&#x27;&quot;)&amp;</span><br><span class="line">    done</span><br><span class="line">    wait</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>
# 第8章 参数
## 8.1 从read读取
1．基本语法

<p>read(选项)(参数)</p>
<p>选项：</p>
<p>-p：指定读取值时的提示符；</p>
<p>-t：指定读取值时等待的时间（秒）。</p>
<p>参数</p>
<p>变量：指定读取值的变量名</p>
<p>当执行到这句话时，系统就会等待用户输入参数的值，并将用户输入的值赋给参数。</p>
<h2 id="8-2-getopts-读取参数"><a href="#8-2-getopts-读取参数" class="headerlink" title="8.2 getopts 读取参数"></a>8.2 getopts 读取参数</h2><p>除了使用$n来按顺序获取脚本参数，还可以使用getopts来指定参数的值。</p>
<p>例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">while getopts &#x27;n:a:s:&#x27; arg;do</span><br><span class="line">  case $arg in</span><br><span class="line">  &quot;s&quot;)</span><br><span class="line">    score=$OPTARG</span><br><span class="line">  ;;</span><br><span class="line">  &quot;a&quot;)</span><br><span class="line">    age=$OPTARG</span><br><span class="line">  ;;</span><br><span class="line">  &quot;n&quot;)</span><br><span class="line">    name=$OPTARG</span><br><span class="line">  ;;</span><br><span class="line">  esac</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo $name $age $score</span><br></pre></td></tr></table></figure>
<p>调用脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh test.sh -a 18 -n cj -s 99</span><br></pre></td></tr></table></figure>
<p>得到结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cj 18 99</span><br></pre></td></tr></table></figure>

<br>
# 第9章 函数

<h2 id="9-1-系统函数"><a href="#9-1-系统函数" class="headerlink" title="9.1 系统函数"></a>9.1 系统函数</h2><p><strong>basename</strong><br>basename [string &#x2F; pathname] [suffix]   得到最后一个&#x2F;后面的字符串，如果指定了suffix且字符串以suffix结尾，会将suffix的内容从结果中去掉。<br>例：<code>basename  asdfs/sadfs/gsdfd123a  123a</code>   得到结果 gsdfd</p>
<p><strong>dirname</strong><br>dirname [string &#x2F; pathname]  得到最后一个&#x2F;前面的字符串</p>
<h2 id="9-2-自定义函数"><a href="#9-2-自定义函数" class="headerlink" title="9.2 自定义函数"></a><strong>9.2 自定义函数</strong></h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名（）｛</span><br><span class="line">函数体</span><br><span class="line"><span class="built_in">return</span>  <span class="variable">$num</span></span><br><span class="line">｝</span><br></pre></td></tr></table></figure>
<p>函数名    来调用该函数。</p>
<p>①括号可以省略，但一定要换行。<br>②return可以省略，如果不省略那么最好放到函数体的最后，return后面的语句不会执行。return可以返回一个数字，若返回的数字是负数，则return语句时效；若返回的是整数，则$?得到的是此数关于256的余数；若返回的是字符串，则$?得到的是255。return不适合返回计算结果，一般用来返回语句的执行状态。</p>
<h1 id="第10章-Shell工具（重点）"><a href="#第10章-Shell工具（重点）" class="headerlink" title="第10章 Shell工具（重点）"></a>第10章 Shell工具（重点）</h1><h2 id="10-1-cut（将多行内容根据分隔符分成多个域（-d），并输出指定的域（-f）；或者直接根据字符位置截取并输出（-c））"><a href="#10-1-cut（将多行内容根据分隔符分成多个域（-d），并输出指定的域（-f）；或者直接根据字符位置截取并输出（-c））" class="headerlink" title="10.1 cut（将多行内容根据分隔符分成多个域（-d），并输出指定的域（-f）；或者直接根据字符位置截取并输出（-c））"></a>10.1 cut（将多行内容根据分隔符分成多个域（-d），并输出指定的域（-f）；或者直接根据字符位置截取并输出（-c））</h2><p>cut [选项参数]  filename      可以处理文件和管道符倒过来的流</p>
<p>说明：默认分隔符是制表符</p>
<pre><code>|选项参数 |功能
|————————|—————————————————————————
|-f      |列号，提取第几列
|2，3    |表示2和3列；2-4表示2到4列；2-表示2列之后全是；
|-5      |表示第五行和之前的行
|-d      |分隔符，按照指定分隔符分割列
|-c      |指定具体的字符 
|2，5    |表示第2和第5个字符；2-5表示第2到第5个字符；2-表示第二个及以后的字符；-5表示第五个和之前的字符
</code></pre>
<p>–complement 	选项提取指定字段之外的列</p>
<p>例1： ifconfig | grep “inet[6]* addr” | grep “Bcast” | cut -f 2 -d : | cut -f 1 -d “ “</p>
<p>获取ip地址</p>
<p>例2：ifconfig | grep “inet[6]* addr” | grep “Bcast” | cut -c 21-32</p>
<p>根据其所在的字符位置获取ip地址，但是不灵活，ip地址长度改变截取的内容不准确。</p>
<h2 id="10-2-sed（根据筛选条件对文本进行增删改，但只能输出整行）"><a href="#10-2-sed（根据筛选条件对文本进行增删改，但只能输出整行）" class="headerlink" title="10.2 sed（根据筛选条件对文本进行增删改，但只能输出整行）"></a>10.2 sed（根据筛选条件对文本进行增删改，但只能输出整行）</h2><p>sed [选项参数]  [command]  [filename]     可以处理文件和管道符倒过来的流</p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-e</td>
<td>直接在指令列模式上进行sed的动作编辑</td>
</tr>
<tr>
<td>-i</td>
<td>直接编辑源文件。如果不加-i，则不对源文件进行修改</td>
</tr>
<tr>
<td>-n</td>
<td>-n “2p” 直接输出第二行; sed -n “2,4p” 输出2到4行</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>a</td>
<td>新增，a的后面可以接字串，在下一行出现</td>
</tr>
<tr>
<td>d</td>
<td>删除</td>
</tr>
<tr>
<td>s</td>
<td>查找并替换 ，加上g表示全局替换</td>
</tr>
</tbody></table>
<h3 id="10-2-1-过滤行"><a href="#10-2-1-过滤行" class="headerlink" title="10.2.1 过滤行"></a>10.2.1 过滤行</h3><p><code>ifconfig |  sed  &#39;2,3aXXX&#39;</code>   表示在2行到3行下新建行插入XXX</p>
<p><code>Ifconfig | sed  &#39;2,5d&#39; </code>   表示删除2到5行，注意2,5表示2到5行</p>
<p><code>Ifconfig | sed  &#39;2,3s/1/x/&#39; </code> 表示分别查找2行到3行中的第一个1，然后替换成x</p>
<p><code>Ifconfig | sed  &#39;2,3s/1/\*/g&#39; </code> 表示分别查找2行到3行中的全部1，然后替换成, *前最好加上转义符号。注意最后加上g（global）表示全局替换</p>
<p><code>ifconfig | sed &#39;2,3s/inet[6]* addr/Ip Address/&#39; </code>正则表达式的应用，将2行到3行中的inet addr和inet6 addr替换成Ip  Address</p>
<p><code>sed &#39;/inet/d&#39; sed.txt</code>  删除sed.txt文件中所有包含wo的行</p>
<p><code>ifconfig | sed &#39;/^e/,/^ *U/s/[0-9]/\*/g&#39;</code> 从e开始的行到许多空格和U开始的行之间的全部行的数字都替换成*</p>
<p><code>ifconfig | sed &#39;2,3s/inet\([0-9]*\) addr/Ip\1 addr/&#39; </code>将inet addr替换为Ip addr ，如果inet后有数字则保留。将要保留的部分括号括起来（括号要加转义字符），\1表示第一个要保留的字符保留到什么位置，最多保留9个。</p>
<p><code>sed -i -e &#39;2a/xxx&#39; -e &#39;2,3s/\(i\)net\([0-9]*\) addr/\1p\2/ &#39; b.txt</code>  对文件进行修改。</p>
<p>删除文件中最后三行，执行如下两行：<br><code>nu=$(sed -n &#39;$=&#39; tls-ca-bundle.pem)</code> 获取总行数<br><code>sed $(($A-2)),$&#123;A&#125;d tls-ca-bundle.pem</code> 删除最后三行 </p>
<p>注意：单引号中的变量会被当作字符串。如果把单引号换成双引号，双引号中的变量是变量值。</p>
<h2 id="10-3-awk（筛选并分隔行，通过awk语言来实现某些功能。可以进行计算和输出某个域的值）"><a href="#10-3-awk（筛选并分隔行，通过awk语言来实现某些功能。可以进行计算和输出某个域的值）" class="headerlink" title="10.3 awk（筛选并分隔行，通过awk语言来实现某些功能。可以进行计算和输出某个域的值）"></a>10.3 awk（筛选并分隔行，通过awk语言来实现某些功能。可以进行计算和输出某个域的值）</h2><p>awk [选项参数] ‘pattern1{action1}  pattern2{action2}…’ filename</p>
<ul>
<li>pattern：表示AWK在数据中查找的内容，就是匹配模式</li>
<li>action：在找到匹配内容时所执行的一系列命令</li>
</ul>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-F</td>
<td>指定输入文件折分隔符</td>
</tr>
<tr>
<td>-v</td>
<td>赋值一个用户定义变量</td>
</tr>
</tbody></table>
<p>BEGIN｛｝和END｛｝是特殊的函数，</p>
<p>BEGIN｛｝会在数据处理之前执行，END｛｝会在数据处理之后执行。</p>
<p>注意： $0表示该行整行内容；$1…表示域的内容</p>
<table>
<thead>
<tr>
<th>awk的内置变量</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>FILENAME</td>
<td>文件名</td>
</tr>
<tr>
<td>NR</td>
<td>已读的记录数，所处理的行号</td>
</tr>
<tr>
<td>NF</td>
<td>浏览记录的域的个数（切割后，列的个数）</td>
</tr>
</tbody></table>
<p><code>awk -F : &#39;BEGIN&#123;sum=0&#125; &#123;sum+=$3;print $3&quot; &quot;sum &#125; END&#123;sum&#125;&#39; passwd </code>   <br>将passwd文件的所有行以：为分隔符分隔，再将第三个域累加。</p>
<p><code>awk -F : -v sum=0 &#39;&#123;sum+=$3;print $3&quot; &quot;sum&#125; END&#123;print sum&#125;&#39; passwd </code>   <br>-v可以指定一个变量，替代BEGIN中的定义变量。</p>
<p><code>awk -F :  &#39;BEGIN&#123;sum=0&#125;  /^a/&#123;sum+=$4;print $4&quot; &quot;sum&#125; END&#123;print sum&#125;&#39;  passwd </code>  <br>筛选以a开头的行，以：为分隔符划分，将第四个域的值累加起来输出。</p>
<p><code>awk -F : &#39;BEGIN&#123;sum=0;print FILENAME&#125; /^a/&#123;sum+=$3;print NR&quot; &quot;$3&quot; &quot;sum&#125; END&#123;print sum&quot; &quot;NF&#125;&#39; passwd</code><br>NR表示所处理的行号（BEGIN行号为0，END行号为所有行数加一），NF表示分割出来的域的个数。FILENAME是当前文件名。</p>
<p><code>awk -F : &#39;/inet[0-9]* addr/&#123;print $2&#125;&#39; | awk -F &quot; &quot; &#39;NR==1,NR==2&#123;print $1&#125;&#39;</code>  <br>可以通过NR来筛选出固定行号。</p>
<h2 id="10-4-sort"><a href="#10-4-sort" class="headerlink" title="10.4 sort"></a>10.4 sort</h2><p>sort(选项)(参数)</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-n</td>
<td>依照数值的大小排序，不加-n按字符串大小排序</td>
</tr>
<tr>
<td>-r</td>
<td>以相反的顺序来排序</td>
</tr>
<tr>
<td>-t</td>
<td>设置排序时所用的分隔字符</td>
</tr>
<tr>
<td>-k</td>
<td>指定需要排序的列</td>
</tr>
<tr>
<td>-u</td>
<td>去重</td>
</tr>
</tbody></table>
<p>参数：指定待排序的文件列表</p>
<p> 例：<code>cat passwd | grep ^a | sort -t : -k 3 -n -r </code>  将passwd中以a开头的行，以：为分隔符，取第三个域，按数值大小顺序倒序排序。</p>
<h2 id="10-5-grep（按名称查找）"><a href="#10-5-grep（按名称查找）" class="headerlink" title="10.5 grep（按名称查找）"></a>10.5 grep（按名称查找）</h2><p>grep [选项] [查找内容] [源文件]</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-n, –line-number</td>
<td>显示匹配行及行号</td>
</tr>
<tr>
<td>-r, –recursion</td>
<td>递归查找当前目录及其子目录</td>
</tr>
<tr>
<td>-i, –ignore-case</td>
<td>不区分大小写</td>
</tr>
<tr>
<td>-c, –count</td>
<td>统计匹配的行数</td>
</tr>
<tr>
<td>-v, –revert-match</td>
<td>显示不包含匹配文本的所有行</td>
</tr>
<tr>
<td>-E</td>
<td>满足任意条件 grep -E “word1</td>
</tr>
</tbody></table>
<p><code>grep -r &quot;hello&quot; xx</code>  在xx文件中查找有hello的行<br><code>grep -r &quot;shen&quot; /home</code>  在home目录及其子目录下查找有shen的行</p>
<p><strong>flume启停脚本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">&quot;start&quot;)</span><br><span class="line">	for host in bigdata1</span><br><span class="line">	do</span><br><span class="line">		ssh bigdata2 &quot;source /etc/profile ; nohup /opt/module/flume-1.7.0/bin/flume-ng agent -n a2 -c /opt/module/flume-1.7.0/conf -f /opt/module/flume-1.7.0/job/kafka-hdfs.conf 1&gt;/dev/null 2&gt;&amp;1 &amp;&quot;</span><br><span class="line">		if [ $? -eq 0 ]</span><br><span class="line">		then</span><br><span class="line">			echo ----- $&#123;host&#125; flume启动成功 -----</span><br><span class="line">		fi</span><br><span class="line">	done</span><br><span class="line">;;</span><br><span class="line">&quot;stop&quot;)</span><br><span class="line">	for host in bigdata1 #bigdata2</span><br><span class="line">	do</span><br><span class="line">		ssh $&#123;host&#125; &quot;source /etc/profile ; ps -ef | awk -F \&quot; \&quot; &#x27;/kafka-hdfs.conf/ &amp;&amp; !/awk/&#123;print \$2&#125;&#x27; | xargs kill &quot;</span><br><span class="line">		if [ $? -eq 0 ]</span><br><span class="line">		then</span><br><span class="line">			echo ----- $&#123;host&#125; flume关闭成功 -----</span><br><span class="line">		fi</span><br><span class="line">	done</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p><strong>也可以通过pgrep命令快速查找进程号而不用awk截取进程号</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">case $1 in</span><br><span class="line">&quot;start&quot;)&#123;</span><br><span class="line">  echo &#x27;----- 启动 prometheus -----&#x27;</span><br><span class="line">  nohup /opt/module/prometheus-2.26.0/prometheus --web.enable-admin-api --config.file=/opt/module/prometheus-2.26.0/prometheus.yml &gt; /opt/module/prometheus-2.26.0/prometheus.log 2&gt;&amp;1 &amp;</span><br><span class="line">  echo &#x27;----- 启动 pushgateway -----&#x27;</span><br><span class="line">  nohup /opt/module/pushgateway-1.4.0/pushgateway --web.listen-address :9091 &gt; /opt/module/pushgateway-1.4.0/pushgateway.log 2&gt;&amp;1 &amp;</span><br><span class="line">  echo &#x27;----- 启动 grafana -----&#x27;</span><br><span class="line">  nohup /opt/module/grafana-7.5.2/bin/grafana-server --homepath /opt/module/grafana-7.5.2 web &gt; /opt/module/grafana-7.5.2/grafana.log 2&gt;&amp;1 &amp;</span><br><span class="line">&#125;;;</span><br><span class="line">&quot;stop&quot;)&#123;</span><br><span class="line">  echo &#x27;----- 停止 grafana -----&#x27;</span><br><span class="line">  pgrep -f grafana | xargs kill</span><br><span class="line">  echo &#x27;----- 停止 pushgateway -----&#x27;</span><br><span class="line">  pgrep -f pushgateway | xargs kill</span><br><span class="line">  echo &#x27;----- 停止 prometheus -----&#x27;</span><br><span class="line">  pgrep -f prometheus | xargs kill</span><br><span class="line">&#125;;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<br>
pgrep 是通过程序的名字来查询进程的工具
- pgrep 参数 程序

<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-f</td>
<td>显示完整程序，包括当前进程和子进程</td>
</tr>
<tr>
<td>-l</td>
<td>显示源代码</td>
</tr>
<tr>
<td>-n</td>
<td>显示新程序</td>
</tr>
<tr>
<td>-o</td>
<td>显示旧程序</td>
</tr>
<tr>
<td>-v</td>
<td>与条件不符合的程序</td>
</tr>
</tbody></table>
<br>
# 十一、数组
Shell数组的定义:
Shell中用括号()来表示数组，数组元素之间用空格来分隔，由此，定义数组的一般形式为:  Array_name=(ele1 ele2 ele3 …… elen)
>注意，赋值号=两边不能由空格，必须紧挨着数组名和数组元素


<ul>
<li><p>显示数组长度</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr=(a b c)</span><br><span class="line">echo $&#123;#arr[@]&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>取数组中所有值</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arr=(a b c)</span><br><span class="line">echo $&#123;arr[*]&#125;</span><br><span class="line"># 或</span><br><span class="line">arr=(a b c)</span><br><span class="line">echo $&#123;arr[@]&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>取下标对应的值(第一个元素的下标为0，同java)</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr=(a b c)</span><br><span class="line">echo $&#123;arr[0]&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过seq创建等差数组</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(seq 0 1 $&#123;#array[@]&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>例：将字符串转为数组，通过下标遍历数组中元素</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">str=177,178</span><br><span class="line">array=(`echo $str | sed &#x27;s/,/ /g&#x27;`)</span><br><span class="line">echo $&#123;array[@]&#125;</span><br><span class="line">for i in $(seq 0 1 $&#123;#array[@]&#125;)</span><br><span class="line">do</span><br><span class="line"> echo $&#123;array[i]&#125;</span><br><span class="line">done</span><br></pre></td></tr></table></figure></li>
</ul>
<br>
# 十二、企业真实面试题
## 11.1 京东
#### 问题1：使用Linux命令查询file1中空行所在的行号
执行命令如下
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hxr@bigdata2 bin]\$ awk &#x27;/^$/&#123;print NR&#125;&#x27; sed.txt</span><br></pre></td></tr></table></figure>
输出
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure>

<h4 id="问题2：有文件chengji-txt内容如下"><a href="#问题2：有文件chengji-txt内容如下" class="headerlink" title="问题2：有文件chengji.txt内容如下:"></a>问题2：有文件chengji.txt内容如下:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">张三 40</span><br><span class="line">李四 50</span><br><span class="line">王五 60</span><br></pre></td></tr></table></figure>
<p>使用Linux命令计算第二列的和并输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hxr@bigdata2 bin]\$ cat chengji.txt | awk -F &quot; &quot; &#x27;&#123;sum+=$2&#125; END&#123;print sum&#125;&#x27;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">150</span><br></pre></td></tr></table></figure>

<br>
## 11.2 搜狐&和讯网
#### 问题1：Shell脚本里如何检查一个文件是否存在？如果不存在该如何处理？

<p>执行命令如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">if [ -f file.txt ]; then</span><br><span class="line">   echo &quot;文件存在!&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;文件不存在!&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<br>
## 11.3 新浪
#### 问题1：用shell写一个脚本，对文本中无序的一列数字排序

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6-2 ~]# cat test.txt</span><br><span class="line">9</span><br><span class="line">8</span><br><span class="line">7</span><br><span class="line">6</span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">10</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>执行命令如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6-2 ~]# sort -n test.txt|awk &#x27;&#123;a+=$0;print $0&#125;END&#123;print &quot;SUM=&quot;a&#125;&#x27;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">SUM=55</span><br></pre></td></tr></table></figure>

<br>
## 11.3 金和网络
#### 问题1：请用shell脚本写出查找当前文件夹（/home）下所有的文本文件内容中包含有字符”shen”的文件名称
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hxr@bigdata2 bin]\$ grep -r &quot;shen&quot; /home | cut -d &quot;:&quot; -f 1</span><br></pre></td></tr></table></figure>


<br>
## 获取周末和月末的日期
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 遍历日期然后获取时间节点</span><br><span class="line">judge_date=`date -d &quot;$end_date +1 day&quot; +%F`</span><br><span class="line">while [[ &quot;$judge_date&quot; != &quot;$start_date&quot; ]];do</span><br><span class="line">  judge_date=`date -d &quot;$judge_date -1 day&quot; +%F`;</span><br><span class="line">  week=`date -d &quot;$judge_date&quot; +%a`</span><br><span class="line">  if [ &quot;$week&quot; == &#x27;日&#x27; ];then</span><br><span class="line">#    target_dates=&quot;$target_dates $judge_date&quot;</span><br><span class="line">    target_dates=&quot;$judge_date $target_dates&quot;</span><br><span class="line">    continue</span><br><span class="line">  fi</span><br><span class="line"></span><br><span class="line"># 这里取下个月的命令有bug，注意规避</span><br><span class="line">  current_month=`date -d &quot;$judge_date&quot; +%y-%m`</span><br><span class="line">  next_month=`date -d &quot;$current_month-01 +1 month&quot; +%y-%m`</span><br><span class="line">  month_head=&quot;$next_month-01&quot;</span><br><span class="line">  month_tail=`date -d &quot;$month_head -1 day&quot; +%F`</span><br><span class="line">  if [ &quot;$judge_date&quot; == &quot;$month_tail&quot; ];then</span><br><span class="line">#    target_dates=&quot;$target_dates $judge_date&quot;</span><br><span class="line">    target_dates=&quot;$judge_date $target_dates&quot;</span><br><span class="line">    continue</span><br><span class="line">  fi</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">CJ</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/05/06/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/shell%E7%BC%96%E7%A8%8B/">http://example.com/2023/05/06/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/shell%E7%BC%96%E7%A8%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/05/06/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/SpEL%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="SpEL表达式"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpEL表达式</div></div></a></div><div class="next-post pull-right"><a href="/2023/05/06/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/java%E7%BC%96%E7%A8%8B2/" title="java编程2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">java编程2</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CJ</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">419</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">38</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">常用的正则表达式语法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%9F%A5%E8%AF%86%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">小知识：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F"><span class="toc-number">2.1.</span> <span class="toc-text">4.1 系统变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">2.2.</span> <span class="toc-text">4.2 自定义变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F%EF%BC%9A-n"><span class="toc-number">2.3.</span> <span class="toc-text">4.3 特殊变量：$n</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="toc-number">2.4.</span> <span class="toc-text">4.4 特殊变量：$#</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F%EF%BC%9A-%E3%80%81"><span class="toc-number">2.5.</span> <span class="toc-text">4.5 特殊变量：$*、$@</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F%EF%BC%9A-%EF%BC%9F"><span class="toc-number">2.6.</span> <span class="toc-text">4.6 特殊变量：$？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-%EF%BC%8C-%EF%BC%8C-%EF%BC%8C-%EF%BC%8C-%EF%BC%8C-%E4%BD%9C%E7%94%A8%E4%B8%8E%E5%8C%BA%E5%88%AB"><span class="toc-number">2.7.</span> <span class="toc-text">4.7 $()，&#96; &#96;，${}，$[]，$(())，[ ] (( )) [[ ]] 作用与区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-if-%E5%88%A4%E6%96%AD"><span class="toc-number">2.8.</span> <span class="toc-text">7.1 if 判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-case-%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.9.</span> <span class="toc-text">7.2 case 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-for-%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.10.</span> <span class="toc-text">7.3 for 循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-while-%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.11.</span> <span class="toc-text">7.4 while 循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-getopts-%E8%AF%BB%E5%8F%96%E5%8F%82%E6%95%B0"><span class="toc-number">2.12.</span> <span class="toc-text">8.2 getopts 读取参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="toc-number">2.13.</span> <span class="toc-text">9.1 系统函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-number">2.14.</span> <span class="toc-text">9.2 自定义函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC10%E7%AB%A0-Shell%E5%B7%A5%E5%85%B7%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">第10章 Shell工具（重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-cut%EF%BC%88%E5%B0%86%E5%A4%9A%E8%A1%8C%E5%86%85%E5%AE%B9%E6%A0%B9%E6%8D%AE%E5%88%86%E9%9A%94%E7%AC%A6%E5%88%86%E6%88%90%E5%A4%9A%E4%B8%AA%E5%9F%9F%EF%BC%88-d%EF%BC%89%EF%BC%8C%E5%B9%B6%E8%BE%93%E5%87%BA%E6%8C%87%E5%AE%9A%E7%9A%84%E5%9F%9F%EF%BC%88-f%EF%BC%89%EF%BC%9B%E6%88%96%E8%80%85%E7%9B%B4%E6%8E%A5%E6%A0%B9%E6%8D%AE%E5%AD%97%E7%AC%A6%E4%BD%8D%E7%BD%AE%E6%88%AA%E5%8F%96%E5%B9%B6%E8%BE%93%E5%87%BA%EF%BC%88-c%EF%BC%89%EF%BC%89"><span class="toc-number">3.1.</span> <span class="toc-text">10.1 cut（将多行内容根据分隔符分成多个域（-d），并输出指定的域（-f）；或者直接根据字符位置截取并输出（-c））</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-sed%EF%BC%88%E6%A0%B9%E6%8D%AE%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%E5%AF%B9%E6%96%87%E6%9C%AC%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%88%A0%E6%94%B9%EF%BC%8C%E4%BD%86%E5%8F%AA%E8%83%BD%E8%BE%93%E5%87%BA%E6%95%B4%E8%A1%8C%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">10.2 sed（根据筛选条件对文本进行增删改，但只能输出整行）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-1-%E8%BF%87%E6%BB%A4%E8%A1%8C"><span class="toc-number">3.2.1.</span> <span class="toc-text">10.2.1 过滤行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-awk%EF%BC%88%E7%AD%9B%E9%80%89%E5%B9%B6%E5%88%86%E9%9A%94%E8%A1%8C%EF%BC%8C%E9%80%9A%E8%BF%87awk%E8%AF%AD%E8%A8%80%E6%9D%A5%E5%AE%9E%E7%8E%B0%E6%9F%90%E4%BA%9B%E5%8A%9F%E8%83%BD%E3%80%82%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%92%8C%E8%BE%93%E5%87%BA%E6%9F%90%E4%B8%AA%E5%9F%9F%E7%9A%84%E5%80%BC%EF%BC%89"><span class="toc-number">3.3.</span> <span class="toc-text">10.3 awk（筛选并分隔行，通过awk语言来实现某些功能。可以进行计算和输出某个域的值）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-sort"><span class="toc-number">3.4.</span> <span class="toc-text">10.4 sort</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-5-grep%EF%BC%88%E6%8C%89%E5%90%8D%E7%A7%B0%E6%9F%A5%E6%89%BE%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">10.5 grep（按名称查找）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%982%EF%BC%9A%E6%9C%89%E6%96%87%E4%BB%B6chengji-txt%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B"><span class="toc-number">3.5.0.1.</span> <span class="toc-text">问题2：有文件chengji.txt内容如下:</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/MySQL/%E6%B3%A8%E8%A7%A3@Select%E5%92%8C@Insert/" title="注解@Select和@Insert">注解@Select和@Insert</a><time datetime="2023-05-06T05:48:28.906Z" title="发表于 2023-05-06 13:48:28">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6/%E6%B3%A8%E8%A7%A3@EnableAutoConfiguration/" title="注解@EnableAutoConfiguration">注解@EnableAutoConfiguration</a><time datetime="2023-05-06T05:48:06.027Z" title="发表于 2023-05-06 13:48:06">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%A6%BB%E7%BA%BF/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7%E6%A1%86%E6%9E%B6/" title="大数据集群监控框架">大数据集群监控框架</a><time datetime="2023-05-06T05:42:56.298Z" title="发表于 2023-05-06 13:42:56">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E9%AB%98%E5%B9%B6%E5%8F%91/HashMap%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98%E5%8F%8AConcurrentHashMap%E5%8E%9F%E7%90%86/" title="HashMap并发问题及ConcurrentHashMap原理">HashMap并发问题及ConcurrentHashMap原理</a><time datetime="2023-05-06T05:31:21.103Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/06/%E9%AB%98%E5%B9%B6%E5%8F%91/Stream%E5%8E%9F%E7%90%86/" title="Stream原理">Stream原理</a><time datetime="2023-05-06T05:31:21.103Z" title="发表于 2023-05-06 13:31:21">2023-05-06</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By CJ</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>