---
title: Cron表达式
categories:
- 编程语言
---
# 一、结构

**Cron有如下两种语法格式：**

- *Seconds Minutes Hours DayofMonth Month DayofWeek Year*

- *Seconds Minutes Hours DayofMonth Month DayofWeek*

| 字段       | 允许值                        | 允许的特殊字符               |
| ---------- | ----------------------------- | ---------------------------- |
| 秒         | 0~59 整数                     | , - * /    四个字符          |
| 分         | 0~59 整数                     | , - * /    四个字符          |
| 小时       | 0~23 整数                     | , - * /    四个字符          |
| 日期       | 1~31 整数(需要考虑每月的天数) | , - * / ? L C #     八个字符 |
| 月份       | 1~12                          | , - * /     四个字符         |
| 星期       | 1~7                           | , - * / ? L C #     八个字符 |
| 年（可选） | 1970~2099                     | , - * /     四个字符         |

<br>
# 二、用法

| 符号 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| *    | 表示匹配该域的任意值。假如在Minutes域使用*, 即表示每分钟都会触发事件。 |
| -    | 表示范围。例如在Minutes域使用5-20，表示从5分到20分钟每分钟触发一次。 |
| /    | 表示起始时间开始触发，然后每隔固定时间触发一次。例如在Minutes域使用5/20,则意味着5分钟触发一次，而25，45等分别触发一次。 |
| ,    | 表示列出枚举值。例如：在Minutes域使用5,20，则意味着在5和20分每分钟触发一次。 |
| ?    | 只能用在DayofMonth和DayofWeek两个域。当2个子表达式其中之一被指定了值以后，为了避免冲突，需要将另一个子表达式的值设为“？”|
| L    | 表示最后(last)，只能出现在DayofWeek和DayofMonth域。如果在DayofWeek域使用6L或FRIL，表示在最后的一个星期五触发；如果使用L(注意区分与1L的区别)表示每星期的最后一天，即周六。如果在DayofMonth域使用6L，表示这个月的倒数第６天触发。 |
| W    | 表示有效工作日(周一到周五),只能出现在DayofMonth域。例如：在 DayofMonth使用5W，如果5日是星期六，则将在最近的工作日：星期五，即4日触发。如果5日是星期天，则在6日(周一)触发；如果5日在星期一到星期五中的一天，则就在5日触发。另外一点，W的最近寻找不会跨过月份。 |
| LW   | 这两个字符可以连用，表示在某个月最后一个工作日，即最后一个星期五。 |
| #    | 用于确定每个月第几个星期几，只能出现在DayofMonth域。例如在4#2，表示某月的第二个星期三。 |


<br>
# 三、示例



| 表达式                 | 含义                                                |
| ---------------------- | --------------------------------------------------- |
| 0 0 2 1 \* ? \*        | 每月的1日的凌晨2:00触发                             |
| 0 15 10 ? \* MON-FRI   | 每周一到周五的早上10:15触发                         |
| 0 15 10 ? 6L 2002-2006 | 2002年到2006年的每月的最后一个星期五的早上10:15触发 |
| 0 0 10,14,16 \* \* ?   | 每天10:00,14:00,16:00触发                           |
| 0 0/30 9-17 \* \* ?    | 每天9:00-17:00每隔半小时触发                        |
| 0 0 12 ? \* WED        | 每周三的12:00触发                                   |
| 0 15 10 ? \* \*        | 每天10:15触发                                       |
| 0 15 10 \* \* ?        | 每天10:15触发                                       |
| 0 15 10 \* \* ? 2005   | 2005年的每天10:15触发                               |
| 0 \* 14 \* \* ?        | 每天14:00-14:59之间每分钟触发                       |
| 0 0/5 14 \* \* ?       | 每天14:00-14:59之间每5分钟触发                      |
| 0 0/5 14,18 \* \* ?    | 每天14:00-14:59之间和18:00-18:59之间每5分钟触发     |
| 0 0-5 14 \* \* ?       | 每天14:00-14:05之间每分钟触发                       |
| 0 10,44 14 ? 3 WED     | 每年3月份的每周三的14:10和15:44触发                 |
| 0 15 10 ? \* MON-FRI   | 每周一到周五的的10:15触发                           |
| 0 15 10 15 \* ?        | 每月15日的10:15触发                                 |
| 0 15 10 L \* ?         | 每月最后一天的10:15触发                             |
| 0 15 10 ? \* 6L        | 每月最后一个周五的10:15触发                         |
| 0 15 10 ? \* 6#3       | 每月的第三个周五的10:15触发                         |
