---
title: Redis
categories:
- 中间件
---
#一、redis的基本概念：
## 1.1 redis作为缓存的概念
### 1.1.1 缓存穿透
**描述：**
       缓存穿透是指缓存和数据库中都没有的数据，而用户不断发起请求，如发起为id为“-1”的数据或id为特别大不存在的数据。这时的用户很可能是攻击者，攻击会导致数据库压力过大。
**解决方案：**
1. 接口层增加校验，如用户鉴权校验，id做基础校验，id<=0的直接拦截；
2. 从缓存取不到的数据，在数据库中也没有取到，这时也可以将key-value对写为key-null，缓存有效时间可以设置短点，如30秒（设置太长会导致正常情况也没法使用）。这样可以防止攻击用户反复用同一个id暴力攻击。
3. 使用布隆过滤器。

### 1.1.2 缓存击穿
**描述：**
      缓存击穿是指 **热点数据**，缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大。
**解决方案：**
1. 设置热点数据永远不过期。
2. 集群加分布式锁；单体加互斥锁，互斥锁参考代码如下：![20180919143214879.png](Redis.assets