---
title: 阿里建模标准
categories:
- 大数据建模
---
参考：[数据建模 (aliyun.com)](https://help.aliyun.com/document_detail/277067.html)

# 一、概览
- 数据分层
    您可以结合业务场景、数据场景综合考虑设计数仓的数据分层，DataWorks为您默认创建业界通用的五层数仓分层：

   - 数据引入层 ODS（Operational Data Store）
ODS层用于接收并处理需要存储至数据仓库系统的原始数据，其数据表的结构与原始数据所在的数据系统中的表结构一致，是数据仓库的数据准备区。ODS层对原始数据的操作具体如下：
将原始的结构化数据增量或全量同步至数据仓库中。
将原始的非结构化数据（例如，日志信息）进行结构化处理，并存储至MaxCompute。
根据实际业务需求，记录原始数据的历史变化或对原始数据进行简单的清洗。
ODS层的数据表，命名必须以ods开头，并且生命周期为366天。
   - 明细数据层 DWD（Data Warehouse Detail）
DWD层通过企业的业务活动事件构建数据模型。基于具体业务事件的特点，构建最细粒度的明细数据表。您可以结合企业的数据使用特点，将明细数据表的某些重要维度属性字段适当冗余，即宽表化处理。同时，也可以减少明细数据表及维度表的关联，提高明细表的易用性。

   - 汇总数据层 DWS（Data Warehouse Summary）
DWS层通过分析的主题对象构建数据模型。基于上层的应用和产品的指标需求，构建公共粒度的汇总指标事实表。
例如，从ODS层中对用户的行为做一个初步的归类汇总，抽象出来一些通用的维度，假设维度为时间、IP、ID，并根据这些维度统计出相关数据，比如用户每个时间段在不同登录IP购买的商品数。则在DWS层可以进一步添加一层轻度的汇总，可以让计算更加的高效。例如在此基础上计算仅7天、30天、90天的行为会节省很多时间。

   - 应用数据层 ADS（Application Data Service）
ADS层用于存放数据产品个性化的统计指标数据，输出各种报表。例如，某电商企业，在6月9日至6月19日，杭州地域出售的各大球类商品的数量及排行情况。

   - 公共维度层 DIM（Dimension）
DIM层使用维度构建数据模型。基于实际业务，通过定义维度，确定维度主键，添加维度属性，关联不同维度等操作，构建整个企业的一致性数据分析维表，帮助您降低数据计算口径和算法不统一的风险。
    您也可以根据业务需求创建其他分层数据层，创建数据分层的操作请参见[创建数仓分层](https://help.aliyun.com/document_detail/276023.htm?spm=a2c4g.11186623.0.0.591e5197UXfEUR#task-2088396)。


<br>
*   业务分类

    当企业业务比较复杂，不同类型业务彼此间需要共享数据域，但是又希望能在模型设计和应用过程中快速定位本业务的数据时，您可结合真实业务情况，规划不同的业务分类，在后续建模的维度表和明细表中，将其关联到对应的业务分类中。创建业务分类的操作可参见[业务分类](https://help.aliyun.com/document_detail/276957.htm?spm=a2c4g.11186623.0.0.591e5197UXfEUR#task-2090886)。

*   数据域

    数据域是一个较高层次的数据归类标准，是对企业业务过程进行抽象、提炼、组合的集合，是企业业务人员在使用数据时第一个分组入口，可以帮助企业业务人员快速的从海量的数据中快速圈定到自己的业务数据。

    数据域面向业务分析，一个数据域对应一个宏观分析领域，比如采购域、供应链域、HR域、电商业务域等。数据域的设定建议由统一组织或者人员（如数据架构师或者模型小组成员）进行管理和设定，数据域设计人员需要能对企业有深刻的业务理解，更多的表达对业务的解释和抽象。使用DataWorks进行数据域的规划建设的操作，请参见[数据域](https://help.aliyun.com/document_detail/276958.htm#task-2088481)。

*   业务过程

    业务过程是对业务活动流程的描述，例如在电商领域，加购、下单、支付等都可以是一个业务过程。进行业务效果分析时，业务过程有非常典型的应用，例如常用漏斗分析，即将购买商品的业务活动分解为浏览商品、加入购物车、下订单、付款、确认收货等业务过程，统计每个业务过程的“订单数”，将可以针对“订单数”这一指标做漏斗分析。使用DataWorks创建业务过程的操作请参见[业务过程](https://help.aliyun.com/document_detail/276956.htm#task-2089624)。

*   数据标准

    DataWorks数据建模支持在建模前规划制定数据标准，或在建模使用过程中根据业务情况沉淀企业业务的数据标准。通过规范约束标准代码、度量单位、数据标准、命名词典，来保障后续建模与应用过程中数据处理的一致性。

    例如，现有注册表和登录表两张表，注册表中存储了会员ID，字段名为user_id，登录表中也存储了会员ID，字段名为userid，此时针对会员ID这个数据创建统一的数据标准，例如指定数据处理的标准代码、指定字段的属性要求（例如字段的数据类型、长度、默认值等）、指定数据的度量单位。创建好数据标准后，后续在建模过程中涉及到会员ID这个字段的设置时，即可直接关联此标准，以此来保障所有会员ID字段的标准统一。

    DataWorks中数据标准的创建操作请参见[字段标准](https://help.aliyun.com/document_detail/276025.htm#task-2089813)。


<br>
# 二、分层详细规范
## dim维度表
**dim表名**
表名	表的内部名称，可由小写英文字母、下划线（_）、数字组成，并且以小写英文字母开头。
**dim表中文名**
表中文名	表的中文名称，可由中文、英文字母、下划线（_）、数字、and（&）、英文括号组成，并且以中文、英文字母或数字开头。

## dwd明细表
**dwd表名**
表的内部名称，可由小写英文字母、下划线（_）、数字组成，并且以小写英文字母开头。
**dwd表中文名**
表中文名	表的中文名称，可由中文、英文字母、下划线（_）、数字、and（&）、英文括号组成，并且以中文、英文字母或数字开头。

## dws汇总表
**dws表名**
建议命名格式为dws_{数据域}_{统计维度}_{自定义命名标签}_{时间周期}，方便您快速了解汇总表的统计内容。
表名称由小写英文字母、下划线（\_）、数字组成，并且以小写英文字母开头。例：dws_trade_buyer_subpay_1d，其中：数据域为trade；统计维度为buyer；自定义命名标签为subpay；时间周期为1d。

**dws表中文名**
中文名称由中文、英文字母、下划线（_）、数字、and（&）、英文括号组成，并且以中文、英文字母或数字开头。最大长度为256字符。例：买家交易分阶段付款汇总表

**建表**
您可以根据业务需求，选择如下表类型。
普通汇总表：只能统计单粒度的数据，不会做多个粒度数据的再次汇总。
例如，创建dws_demo_2普通汇总表，语句如下。
```
create table dws_demo_2 (
    shop_code comment '维度：门店code',
    pay_amt comment '指标：门店销售金额',
    pay_cnt comment '指标：门店下单次数'
) comment '普通汇总表';
```
您只需要使用select语法查询目标指标字段，即可获取固定粒度（门店粒度）的指标数据。普通汇总表不支持使用组合逻辑查询多个统计粒度的数据。
轻度汇总表：可以统计多个粒度的数据，并将不同粒度的数据进行再次汇总。
例如，创建dws_demo_1轻度汇总表，语句如下。
```
create table dws_demo_1 (
    merchant_code comment '维度：商家code',
    company_code comment '维度：子公司code',
    shop_code comment '维度：门店code',
    sku_code comment '维度：商品code',
    pay_type comment '维度：支付类型',
    pay_amt comment '指标：销售金额',
    pay_cnt comment '指标：下单次数'
) comment '轻度汇总表';
```
您可以通过group by语法，组合出多种不同粒度的派生指标，进行统计汇总。
使用group by merchant_code语句，统计商家粒度的指标数据。
使用group by merchant_code,company_code,shop_code语句，统计门店粒度的指标数据。

## ads应用表
**表名**
表名	应用表的表名称。
表名称由小写英文字母、下划线（_）、数字组成，并且以小写英文字母开头。

**表中文名**
表中文名	表显示出来的中文名称。
中文名称由中文、英文字母、下划线（_）、数字、and（&）、英文括号组成，并且以中文、英文字母或数字开头。最大长度为256字符。
