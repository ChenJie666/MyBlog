---
title: Linux命令
categories:
- Linux
---
# 一、目录结构

| 目录        | 说明                                                         |
| ----------- | ------------------------------------------------------------ |
| /bin        | Binary的缩写，这个目录存放最经常使用的命令；                 |
| /sbin       | s就是Super User的意思，这里存放的时系统管理员使用的系统管理程序； |
| /home       | 存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的； |
| /root       | 该目录为系统管理员，也称作超级权限者的用户主目录；           |
| /lib        | 系统开机所需要最基本的动态连接共享库，起作用类似与Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库； |
| /lost+found | 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件； |
| /etc        | 所有的系统管理所需要的配置文件和子目录；                     |
| /usr        | 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，累细雨windows下的program files目录； |
| /boot       | 这里存放的是启动Linux是使用的一些核心文件，包括一些连接文件以及镜像文件，自己安装的别放在这里； |
| /proc       | 这个目录是一个虚拟的目录，他是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息； |
| /srv        | service缩写，该目录存放一些服务启动之后需要提取的数据；      |
| /sys        | 这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs； |
| /tmp        | 用于存放一些临时文件；                                       |
| /dev        | 类似于windows的设备管理器，把所有的硬件用文件的形式存储；    |
| /media      | linux系统会自动识别一些设备，例如U盘、光驱等待，当识别后linux会把识别的设备挂载到这个目录下； |
| /mnt        | 系统提供该目录是为了让用户临时挂载别的文件系统，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了； |
| /opt        | 这是给主机额外安装软件所摆放的位置。默认时空的；             |
| /var        | 这个目录中存放着不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件； |
| /selinux    | SELinux是一种安全子系统，它能控制程序只能访问特定文件；      |


快照功能：记录当前的硬盘的状态。刚建快照时快照占用内存为0，标记了当前硬盘的存储状态。当虚拟机对快照标记的内容改写时，会将改写的内容存储进快照，与未改写的部分整合得到完整的快照。当快照标记的部分被完全改写，那么快照存储空间完整记录了当时拍摄时的内存状态。


# 二、常用命令

**参数形式**

第一种：参数用一横的说明后面的参数是字符形式。

第二种：参数用两横的说明后面的参数是单词形式。

第三种：参数前有横的是 System V风格。

第四种：参数前没有横的是 BSD风格。

|      | 常用的参数                                                   |
| ---- | ------------------------------------------------------------ |
| -a   | 全部文件  ps中所有进程                                       |
| -d   | unzip指定解压路径                                            |
| -e   | 支持反斜线控制字符转换  rpm中表示卸载                        |
| -f   | 强制执行（force）  tail中不断刷新内容（flush）               |
| -g   | group用户组                                                  |
| -h   | df命令中以较易阅读的 GBytes, MBytes, KBytes 等格式显示       |
| -l   | 长串数据  fdisk中显示所有硬盘分区列表                        |
| -n   | 显示行号   head和tail中指定显示行数   groupmod中修改组名（groupmod  -n 新组名 老组名） |
| -p   | 多层目录                                                     |
| -r   | 递归整个文件夹   用户和用户的相关文件夹  zip中指定压缩目录   |
| -R   | 与权限相关的操作chmod、chown，也是整个文件夹递归操作         |
| -v   | 显示指令的详细过程                                           |
| -y   | 执行yum命令时所有问题都是yes                                 |
| -9   | kill指令中强迫进程立即停止                                   |



## 概述

| 命令                        | 说明                                          |
| --------------------------- | --------------------------------------------- |
| man                         | 获得帮助信息                                  |
| help 命令                   | 获得shell内置命令的帮助信息                   |
| pwd:print working directory | 打印工作目录                                  |
| vim                         | 查看文件（不存在则创建）                      |
| ls                          | 查看目录下的文件                              |
| cd                          | 跳转路径                                      |
| mkdir [-p] 目录             | 创建目录（-p 是否递归创建）                   |
| rmdir                       | 删除空目录                                    |
| touch                       | 需要创建的空文件名称                          |
| cp                          | 复制                                          |
| rm                          | 删除                                          |
| cat                         | 查看小文件                                    |
| more                        | 要查看的文件（查看大文件）                    |
| less                        | less 要查看的文件（查看大文件，效率比more高） |
| head                        | 查看文件头10行内容                            |
| tail                        | 查看文件后10行内容                            |
| ln                          | 链接                                          |
| \>    \>>                   | 覆盖和追加                                    |
| echo                        | 输出内容到控制台                              |
| read                        | 从标准输入读取数值                            |



## 2.1 文本操作

**cat、more、less、head、tail命令的比较：**

cat命令可以一次显示整个文件，如果文件比较大，使用不是很方便；

more命令可以让屏幕在显示满一屏幕时暂停，按空格往前翻页，按b往后翻页。

less命令也可以分页显示文件，和more命令的区别就在于： 支持上下键卷动屏幕、查找；不需要在一开始就读取整个文件，打开大文件时比more、vim更快。

head命令用于查看文件的前n行。

tail命令用于查看文件的后n行，加上-f命令，查看在线日志非常方便，可以打印最新增加的日志。



### vim/vi

**一般模式：**

| yy                          | **复制**光标当前一行                |
| --------------------------- | ----------------------------------- |
| p                           | 箭头移动到目的行**粘贴**            |
| u                           | **撤销上一步**                      |
| dd                          | **删除**光标当前行                  |
| x                           | 删除一个字母，相当于del，**向后删** |
| ^                           | **移动到行头**                      |
| \$                           | **移动到行尾**                      |
| gg或者1+G                   | **移动到页头**                      |
| G                           | **移动到页尾**                      |
| 数字+G（先输入数字，在按G） | **移动到目标行**                    |

**编辑模式：**

| i    | **当前光标前**         |
| ---- | ---------------------- |
| a    | 当前光标后             |
| o    | **当前光标行的下一行** |
| I    | 光标所在行最前         |
| A    | 光标所在行最后         |
| O    | 当前光标行的上一行     |

**命令模式：**

| :w             | **保存**                                           |
| -------------- | -------------------------------------------------- |
| :q             | **退出**                                           |
| :!             | **强制执行**                                       |
| / 要查找的词   | n 查找下一个，N 往上查找                           |
| ZZ（shift+zz） | **没有修改文件直接退出，如果修改了文件保存后退出** |
| :set nu        | 显示行号                                           |
| :set nonu      | 关闭行号                                           |
| :nohl          | 删除高亮                                           |
| \G             | 查询sql中以列的形式显示                            |

**编码**
- set ff  （查看编码）
- set ff=unix  （修改编码为unix）

- set encoding=utf-8  更改终端中显示的输出编码
- set fileencoding=utf-8  更改写入文件的输出编码

**多行操作(列编辑模式)**
插入：ctrl+v进入列编辑模式，上下移动光标选择需要插入的位置，然后输入大写I，输入需要文本，最后按esc键退出，就会发现文本会在选择的多行中插入。
删除：ctrl+v进入列编辑模式，上下移动光标选中需要删除的部分，然后按d，就会删除选中的内容。


### vimdiff

-  vimdiff [文件a]  [文件b]	（同时打开两个文件进行比较，左右分布）
- vimdiff -o2 [文件a]  [文件b]	（同时打开两个文件进行比较，上下分布）

### diff
- diff [文件a]  [文件b]   (展示两个文件的不同行)


### head/tail

**①head：显示文件头部内容**

- head [文件]	      （功能描述：查看文件头10行内容）

- head -n 5 [文件]      （功能描述：查看文件头5行内容，5可以是任意行数）

| 选项      | 功能                   |
| --------- | ---------------------- |
| -n <行数> | 指定显示头部内容的行数 |

 

**②tail：输出文件尾部内容**

- tail  [文件] 		（功能描述：查看文件后10行内容）

- tail  -n  5  [文件] 	（功能描述：查看文件后5行内容，5可以是任意行数）

- tail  -f  [文件]		（功能描述：实时追踪该文档的所有更新）

| 选项     | 功能                                 |
| -------- | ------------------------------------ |
| -n<行数> | 输出文件尾部n行内容                  |
| -f       | 显示文件最新追加的内容，监视文件变化 |

注意：用vim和vi修改内容会删除源文件并生成新文件，所以tail -f会失效。需要用到

追加和覆盖语句（>或>>），才能被tail -f监视到。



### cat

一般用于查看小文件

- cat  [选项] [文件]

| 选项 | 功能描述                     |
| ---- | ---------------------------- |
| -n   | 显示所有行的行号，包括空行。 |

 
### zcat
查看压缩文件中的文本内容

- zcat [选项] [文件]

| 选项 | 功能描述                     |
| ---- | ---------------------------- |
| -S   | 当后缀不是标准压缩包后缀时使用此选项 |
| -c   | 将文件内容写到标注输出               |
| -d   | 执行解压缩操作                       |
| -l   | 显示压缩包中文件的列表               |
| -L   | 显示软件许可信息                     |
| -q   | 禁用警告信息                         |
| -r   | 在目录上执行递归操作                 |
| -t   | 测试压缩文件的完整性                 |
| -V   | 显示指令的版本信息                   |
| -l   | 更快的压缩速度                       |
| -9   | 更高的压缩比                         |


例：
```
hadoop fs -cat /base_province/* | zcat
```

### more/less

**①more：文件内容分屏查看器**

- more [文件]

| 操作           | 功能说明                                 |
| -------------- | ---------------------------------------- |
| 空白键 (space) | 代表向下翻一页；                         |
| Enter          | 代表向下翻『一行』；                     |
| q              | 代表立刻离开 more ，不再显示该文件内容。 |
| Ctrl+F         | 向下滚动一屏                             |
| Ctrl+B         | 返回上一屏                               |
| =              | 输出当前行的行号                         |
| :f             | 输出文件名和当前行的行号                 |

 

**②less：分屏显示文件内容，效率比more高**

- less [文件]

| 操作       | 功能说明                                           |
| ---------- | -------------------------------------------------- |
| 空白键     | 向下翻动一页；                                     |
| [pagedown] | 向下翻动一页                                       |
| [pageup]   | 向上翻动一页；                                     |
| /字串      | 向下搜寻『字串』的功能；n：向下查找；N：向上查找； |
| ?字串      | 向上搜寻『字串』的功能；n：向上查找；N：向下查找； |
| q          | 离开 less 这个程序；                               |

 

### read

 **1、简单读取**

运行脚本如下

```
#!/bin/bash

#这里默认会换行  
echo "输入网站名: "  
#读取从键盘的输入  
read website  
echo "你输入的网站名是 $website"  
exit 0  #退出
```

测试结果为：

```
输入网站名: 
www.runoob.com
你输入的网站名是 www.runoob.com
```

**2、-p 参数，允许在 read 命令行中直接指定一个提示。**

运行脚本如下

```
#!/bin/bash

read -p "输入网站名:" website
echo "你输入的网站名是 $website" 
exit 0
```

测试结果为：

```
输入网站名:www.runoob.com
你输入的网站名是 www.runoob.com
```



## 2.2 > 覆盖 和 >> 追加





## 2.3 echo

echo [选项] [输出内容]       （输出内容到控制台）

| 选项 | 说明                     |
| ---- | ------------------------ |
| -n   | 不换行输出               |
| -e   | 支持反斜线控制的字符转换 |

| 控制字符 | 作用                |
| -------- | ------------------- |
| \       | 输出\本身           |
| 
       | 换行符              |
| 	       | 制表符，也就是Tab键 |

输出给定文本的sha256加密后的内容
```
echo -n "chenjie"|sha256sum    
```

## 2.4 ln链接

- ln -s [原文件或目录] [软链接名]  （给原文件创建一个软链接）
- ln [原文件或目录] [软链接名]   （给原文件创建一个链接）




## 2.5 时间

### date

①显示当前时间信息

```
[root@hadoop101 ~]# date
Wed Jun 16 10:28:01 CST 2021
```

②显示当前时间年月日

```
[root@hadoop101 ~]# date +%Y-%m-%d
2021-06-16
```

③显示当前时间年月日时分秒

```
[root@hadoop101 ~]# date "+%Y-%m-%d %H:%M:%S"
2021-06-16 10:27:41
```

④显示昨天

```
[root@hadoop101 ~]# date -d '1 days ago'
Tue Jun 15 10:26:48 CST 2021

[root@hadoop101 ~]# date -d '-1 days'
Tue Jun 15 10:26:48 CST 2021
```

⑤显示明天时间

```
[root@hadoop101 ~]# date -d '-1 days ago'
Thu Jun 17 10:27:22 CST 2021

[root@hadoop101 ~]# date -d '1 days'
Thu Jun 17 10:27:22 CST 2021
```

⑥显示上个月时间

```
[root@hadoop101 ~]# date -d '1 month ago'
Sun May 16 10:27:07 CST 2021

[root@hadoop101 ~]# date -d '-1 month'
Sun May 16 10:27:07 CST 2021
```

需要注意的是取下个月的命令存在bug，执行如下命令会得到21-10，但是正常应该得到21-09，需要注意
`date -d "2021-08-31 +1 month" +%y-%m`

⑦修改系统时间

```
[root@hadoop101 ~]# date -s "2017-06-19 20:52:18"
```

>date +%Y	（功能描述：显示当前年)
date +%m	（功能描述：显示当前月份）
date +%d		（功能描述：显示当前是哪一天）
date "+%Y-%m-%d %H:%M:%S"		（功能描述：显示年月日时分秒）
 

⑧获取当前时间戳
获取秒时间戳： `date +%s`
获取毫秒时间戳：$[`(date +%s%N)`/1000000]


### cal

 查看日历

（1）查看当前月的日历

```
[root@hadoop101 ~]# cal
```

（2）查看2017年的日历

```
[root@hadoop101 ~]# cal 2017
```



## 2.6 压缩和解压缩

### tar

- tar -zcvf [压缩文件] [源文件] 		（压缩文件）
- tar -zxvf [文件] -C [解压路径]	（解压文件）

| tar  | 打包               |
| ---- | ------------------ |
| -z   | 打包同时压缩，.gz文件需要添加       |
| -c   | 产生.tar打包文件   |
| -v   | 显示详细信息       |
| -f   | 指定压缩后的文件名 |
| -x   | 解包.tar文件       |

例：

- `tar -zcvf houma.tar.gz houge.txt bailongma.txt`  将文件houge.txt和bailongma.txt压缩为houma.tar.gz

- `tar -zcvf xiyou.tar.gz xiyou/`   将目录进行压缩
- `tar -zxvf xiyou.tar.gz -C /opt`   解压到/opt目录下



### zip/unzip

对比gzip/gunzip，zip/unzip可以压缩文件和目录且保留源文件。

**①zip：压缩**

- zip  [选项] [生成的文件名]  [需要压缩的一个或多个文件]

| zip选项 | 功能     |
| ------- | -------- |
| -r      | 压缩目录 |



**②unzip：解压缩**

- unzip [选项] [文件]

| unzip | 解包                                      |
| :---- | ----------------------------------------- |
| -d    | 解包目录                                  |
| -f    | 更新现有的文件                            |
| -n    | 解压缩时不要覆盖原有的文件                |
| -P    | 使用zip的密码选项                         |
| -o    | 不必先询问用户，unzip执行后覆盖原有的文件 |

 

### **gzip/gunzip**

只能压缩文件不能压缩目录，不保留原来的文件。

gzip 文件 （只能将文件压缩为*.gz文件）

gunzip 文件.gz	（解压缩文件命令）





## 2.7 cron定时任务

- crontab [选项]

| crond | 系统定时任务                  |
| ----- | ----------------------------- |
| -e    | 编辑crontab定时任务           |
| -l    | 查询crontab任务               |
| -r    | 删除当前用户所有的crontab任务 |

例： crontab -e 

（1）进入crontab编辑界面。会打开vim编辑你的工作。

（2）每隔1分钟，向/root/bailongma.txt文件中添加一个11的数字

*/1 * * * * /bin/echo ”11” >> /root/bailongma.txt

（3）可以用tail  -f  目标文件来实施监控追加的内容


**查看日志**
 可以用tail -f /var/log/cron.log观察

Cron表达式见文章：<https://www.jianshu.com/writer#/notebooks/46619194/notes/75177408>



## 2.8 ls

**ls [选项] [目录或是文件]**

| 选项 | 功能                                                      |
| ---- | --------------------------------------------------------- |
| -a   | 全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用) |
| -l   | 长数据串列出，包含文件的属性与权限等等数据；(常用)        |



## 2.9 cd

cd  [参数]

| 参数        | 功能                                 |
| ----------- | ------------------------------------ |
| cd 绝对路径 | 切换路径                             |
| cd 相对路径 | 切换路径                             |
| cd ~或者cd  | 回到自己的家目录                     |
| cd -        | 回到上一次所在目录                   |
| cd ..       | 回到当前目录的上一级目录             |
| cd -P       | 跳转到实际物理路径，而非快捷方式路径 |

**例：**cd  -P  \$(dirname \$p1) ； pwd  先跳转到文件的所在目录，再打印\$p1文件的实际路径



## 2.10 rm

- rm [选项] [deleteFile]	（删除文件或目录）

| 选项 | 功能                                     |
| ---- | ---------------------------------------- |
| -r   | 递归删除目录中所有内容                   |
| -f   | 强制执行删除操作，而不提示用于进行确认。 |
| -v   | 显示指令的详细执行过程                   |

 



## 2.11 复制

**概述**

①cp（copy）：只能在本机中复制

②scp（secure copy）：可以复制文件给远程主机

scp  -r  test.sh  hxr@hadoop102:/root

③rsync（remote sync）：功能与scp相同，但是不会改文件属性

rsync  -av  test.sh   test.sh  hxr@hadoop102:/root

④nc（netcat）：监听端口，可以实现机器之间传输文件。
nc -lk 7777 (-l表示listen，-k表示keep)


### cp

- cp [选项] [sourcefile] [destfile] 				（功能描述：复制source文件到dest）

| 选项 | 功能                                                         |
| ---- | ------------------------------------------------------------ |
| -r   | 递归复制整个文件夹                                           |
| -a   | 复制目录后其文件属性会发生变化 想要使得复制之后的目录和原目录完全一样,可以使用cp -a |
| -d   | 如果复制的文件是软链接，那么复制后软链接不会失效 |
| -l    | 不复制文件，只是生成链接文件。 |

强制覆盖不提示的方法：